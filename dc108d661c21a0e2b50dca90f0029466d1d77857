{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ac9bf2d4_e00b05f6",
        "filename": "core/java/android/net/NetworkTemplate.java",
        "patchSetId": 10
      },
      "lineNbr": 336,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2021-09-16T07:02:45Z",
      "side": 1,
      "message": "How do you know nobody was calling this constructor with matchRule \u003d MOBILE and metered \u003d false, but still relying on only returning metered traffic ?\n\nA quick survey of the code actually indicates this exists in the code.\n- NetworkPolicyManagerService.readPolicyAL() will read the match rule from an XML file, and use metered \u003d (MOBILE \u003d\u003d rule), so if the rule is MATCH_MOBILE_WILDCARD it will pass false and this patch changes the behavior.\n- StatsPullAtomService.getDataUsageBytesTransferSnapshotForOemManaged() will explicitly pass METERED_ALL together with MATCH_MOBILE_WILDCARD and AFAICT this changes the behavior.\n- MultipathPolicyTracker.MultipathTracker uses explicitly MATCH_MOBILE with METERED_ALL in its constructor and AFAICT this changes the behavior.\n- MetricDisplay.trafficFor passes MATCH_MOBILE_WILDCARD with METERED_ALL and AFAICT this changes the behavior.",
      "range": {
        "startLine": 336,
        "startChar": 34,
        "endLine": 336,
        "endChar": 41
      },
      "revId": "dc108d661c21a0e2b50dca90f0029466d1d77857",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2bffac14_07fcf5d9",
        "filename": "core/java/android/net/NetworkTemplate.java",
        "patchSetId": 10
      },
      "lineNbr": 336,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2021-09-16T10:33:02Z",
      "side": 1,
      "message": "+1, Good catch.\nIIUC we\u0027ll have to modify all the callers who relies on it.\nLuckily it is not public API so callers are somehow limited.",
      "parentUuid": "ac9bf2d4_e00b05f6",
      "range": {
        "startLine": 336,
        "startChar": 34,
        "endLine": 336,
        "endChar": 41
      },
      "revId": "dc108d661c21a0e2b50dca90f0029466d1d77857",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "113f115f_da761bfc",
        "filename": "core/java/android/net/NetworkTemplate.java",
        "patchSetId": 10
      },
      "lineNbr": 336,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2021-09-16T10:51:42Z",
      "side": 1,
      "message": "For NPMS.readPolicyAL(),\nIIUC the only real use case is to read the previous created template.\n1. If the template is created \u003c VERSION_SUPPORTED_CARRIER_USAGE\n  If it is mobile, then the template will be upgrated to templateMeteredness \u003d METERED_YES.\n2. If the template is created \u003e\u003dVERSION_SUPPORTED_CARRIER_USAGE\n  The default mobile template will be created by NetworkTemplate.buildTemplateCarrierMetered() which always create template with METERED YES.\n  So I think for NPMS it is fine.\n  For other callers it should be trivial to fix.",
      "parentUuid": "2bffac14_07fcf5d9",
      "range": {
        "startLine": 336,
        "startChar": 34,
        "endLine": 336,
        "endChar": 41
      },
      "revId": "dc108d661c21a0e2b50dca90f0029466d1d77857",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "84dbb5f4_81824e61",
        "filename": "core/java/android/net/NetworkTemplate.java",
        "patchSetId": 10
      },
      "lineNbr": 336,
      "author": {
        "id": 1385042
      },
      "writtenOn": "2021-09-22T14:33:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "113f115f_da761bfc",
      "range": {
        "startLine": 336,
        "startChar": 34,
        "endLine": 336,
        "endChar": 41
      },
      "revId": "dc108d661c21a0e2b50dca90f0029466d1d77857",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8cbdf314_a647fc3c",
        "filename": "core/java/android/net/NetworkTemplate.java",
        "patchSetId": 10
      },
      "lineNbr": 336,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2021-09-30T10:45:54Z",
      "side": 1,
      "message": "Sorry I don\u0027t see changes to the other files here, can you either put them in the same topic or document where to find them ?",
      "parentUuid": "84dbb5f4_81824e61",
      "range": {
        "startLine": 336,
        "startChar": 34,
        "endLine": 336,
        "endChar": 41
      },
      "revId": "dc108d661c21a0e2b50dca90f0029466d1d77857",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}