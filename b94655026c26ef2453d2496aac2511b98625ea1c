{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8c684930_deb9b0f3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-12-07T18:15:51Z",
      "side": 1,
      "message": "do you have any specific stats?",
      "range": {
        "startLine": 14,
        "startChar": 24,
        "endLine": 15,
        "endChar": 21
      },
      "revId": "b94655026c26ef2453d2496aac2511b98625ea1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b36220a_604ecbd6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1835301
      },
      "writtenOn": "2023-12-08T02:17:53Z",
      "side": 1,
      "message": "Thanks for your reply! The test case is adb install XXX.apk. The adb install process include 2 stage: \n1. send XXX.apk file from host PC to device and save as a temp file \n2. unpack the temp file and do other install jobs.\nIn the stage 1, FileUtils.copy function is called, this case st_in is a Socket file and st_out is Regular file.  \nIn original code, it dose not match copy optimizations condition, so it will run copyInternalUserspace path.\nIf use this patch, socket file--\u003epipe--\u003eregular file, we can get better performance.  \n\nThe detail test information is as followed:\nTest condition:\nHardware：QCOM XR2130， OS: Android 10\nTest case:\nadb install com.MyDearest.Altdeus.local.apk  ----apk file size:1966.3MiB\n\nThe test data is the average of 10 tests\nstage 1 copy file duration:  from 16s reduce to 11s,  reduce about 30%\nwhole install duration:  from 98s reduce to 93s,  reduce about 5%",
      "parentUuid": "8c684930_deb9b0f3",
      "range": {
        "startLine": 14,
        "startChar": 24,
        "endLine": 15,
        "endChar": 21
      },
      "revId": "b94655026c26ef2453d2496aac2511b98625ea1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f84c46e_365f8bc8",
        "filename": "core/java/android/os/FileUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-12-19T02:56:54Z",
      "side": 1,
      "message": "this fails to compile:\n\n```\nframeworks/base/core/java/android/os/FileUtils.java:462: error: cannot find symbol\n                } else if (S_ISSOCK(st_in.st_mode) || S_ISSOCK(st_out.st_mode)) {\n                           ^\n  symbol:   method S_ISSOCK(int)\n  location: class FileUtils\n```\n\npresumably missing static import?",
      "range": {
        "startLine": 462,
        "startChar": 27,
        "endLine": 462,
        "endChar": 35
      },
      "revId": "b94655026c26ef2453d2496aac2511b98625ea1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c8c217a1_ef438c44",
        "filename": "core/java/android/os/FileUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1835301
      },
      "writtenOn": "2023-12-19T03:53:40Z",
      "side": 1,
      "message": "Thanks for your reply, sorry for my mistake. I fixed it. please review.",
      "parentUuid": "2f84c46e_365f8bc8",
      "range": {
        "startLine": 462,
        "startChar": 27,
        "endLine": 462,
        "endChar": 35
      },
      "revId": "b94655026c26ef2453d2496aac2511b98625ea1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "358bf515_f8d932bd",
        "filename": "core/java/android/os/FileUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-12-19T23:54:03Z",
      "side": 1,
      "message": "thanks, btw I think we may also want an update in cts/tests/tests/os/src/android/os/cts/FileUtilsTest.java or frameworks/base/core/tests/coretests/src/android/os/FileUtilsTest.java to make sure we have testing coverage for this change, but I was waiting on the automated testing result first.",
      "parentUuid": "c8c217a1_ef438c44",
      "range": {
        "startLine": 462,
        "startChar": 27,
        "endLine": 462,
        "endChar": 35
      },
      "revId": "b94655026c26ef2453d2496aac2511b98625ea1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cb3be688_79ca9166",
        "filename": "core/java/android/os/FileUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1835301
      },
      "writtenOn": "2023-12-20T02:25:55Z",
      "side": 1,
      "message": "Thanks, you mean I need update some test case in FileUtilsTest.java? And I don\u0027t know how to run the test case in FileUtilsTest.java, can you give some instruction?",
      "parentUuid": "358bf515_f8d932bd",
      "range": {
        "startLine": 462,
        "startChar": 27,
        "endLine": 462,
        "endChar": 35
      },
      "revId": "b94655026c26ef2453d2496aac2511b98625ea1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "535fb4e3_c98cd8ee",
        "filename": "core/java/android/os/FileUtils.java",
        "patchSetId": 2
      },
      "lineNbr": 462,
      "author": {
        "id": 1120458
      },
      "writtenOn": "2023-12-20T20:09:33Z",
      "side": 1,
      "message": "`atest FrameworksMockingServicesTests`",
      "parentUuid": "cb3be688_79ca9166",
      "range": {
        "startLine": 462,
        "startChar": 27,
        "endLine": 462,
        "endChar": 35
      },
      "revId": "b94655026c26ef2453d2496aac2511b98625ea1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}