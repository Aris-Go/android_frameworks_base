{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "31af60d5_2c107acd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2022-10-04T20:50:02Z",
      "side": 1,
      "message": "Thanks Lorena! I don\u0027t have any more comments, please get an approval from Eric and Francois.",
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a70bd205_c351a168",
        "filename": "media/aidl/android/media/audio/common/AudioFlag.aidl",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2022-10-05T09:53:38Z",
      "side": 1,
      "message": "This must be breaking the build as \"SCO\" value is used in frameworks/av/media/libaudioclient/AidlConversion.cpp\nDid you forget to add one CL to this topic?",
      "range": {
        "startLine": 47,
        "startChar": 4,
        "endLine": 47,
        "endChar": 20
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7793b188_9426040c",
        "filename": "media/aidl/android/media/audio/common/AudioFlag.aidl",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1945984
      },
      "writtenOn": "2022-10-05T23:46:49Z",
      "side": 1,
      "message": "I believe that AidlConversion.cpp file is for the frameworks/av/media types, not frameworks/base/media. I added frameworks/base/media/.../AudioFlag.aidl recently to use it in both the system and vendor partitions. \nhttps://android-review.googlesource.com/c/platform/frameworks/base/+/2203458\n\nI haven\u0027t actually replaced all uses of frameworks/av/media/.../AudioFlag.aidl yet, so this shouldn\u0027t break anything.",
      "parentUuid": "a70bd205_c351a168",
      "range": {
        "startLine": 47,
        "startChar": 4,
        "endLine": 47,
        "endChar": 20
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fce6566f_f343ea3e",
        "filename": "media/aidl/android/media/audio/common/AudioFlag.aidl",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2022-10-06T02:59:03Z",
      "side": 1,
      "message": "\u003e I added frameworks/base/media/.../AudioFlag.aidl recently to use it in both the system and vendor partitions.\n\nWe definitely need to move all uses to android.media.audio.common.AudioFlag and remove android.media.AudioFlag. That\u0027s what I used to do when migrating common types into a.m.a.common. Same for a.m.a.c.AudioAttributes vs a.m.AudioAttributesInternal. This should be a purely mechanical change.",
      "parentUuid": "7793b188_9426040c",
      "range": {
        "startLine": 47,
        "startChar": 4,
        "endLine": 47,
        "endChar": 20
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb4cadf9_412a3e0c",
        "filename": "media/aidl/android/media/audio/common/AudioFlag.aidl",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2022-10-13T09:19:57Z",
      "side": 1,
      "message": "So we will do this in a subsequent CL?",
      "parentUuid": "fce6566f_f343ea3e",
      "range": {
        "startLine": 47,
        "startChar": 4,
        "endLine": 47,
        "endChar": 20
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22dd61ef_bec738a1",
        "filename": "media/aidl/android/media/audio/common/AudioFlag.aidl",
        "patchSetId": 6
      },
      "lineNbr": 47,
      "author": {
        "id": 1945984
      },
      "writtenOn": "2022-11-08T20:25:36Z",
      "side": 1,
      "message": "Yes. I created b/258219641 to track this.",
      "parentUuid": "eb4cadf9_412a3e0c",
      "range": {
        "startLine": 47,
        "startChar": 4,
        "endLine": 47,
        "endChar": 20
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d0d1786_c77c33ad",
        "filename": "media/aidl/android/media/audio/common/AudioHalEngineConfig.aidl",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1706828
      },
      "writtenOn": "2022-10-04T15:12:25Z",
      "side": 1,
      "message": "Already discussed, but i cannot remember: regarding settings XML removal, do you plan to add the support in separated CLs?\nBasically, we need domains, configurations, parameters, rules and values.",
      "range": {
        "startLine": 33,
        "startChar": 11,
        "endLine": 33,
        "endChar": 32
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "82279051_9af8893b",
        "filename": "media/aidl/android/media/audio/common/AudioHalEngineConfig.aidl",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1945984
      },
      "writtenOn": "2022-10-05T00:46:53Z",
      "side": 1,
      "message": "Yes, this will be in a separate CL. Thanks for listing them :)",
      "parentUuid": "1d0d1786_c77c33ad",
      "range": {
        "startLine": 33,
        "startChar": 11,
        "endLine": 33,
        "endChar": 32
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5494db32_081459da",
        "filename": "media/aidl/android/media/audio/common/AudioHalVolumeGroup.aidl",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1706828
      },
      "writtenOn": "2022-10-04T11:33:42Z",
      "side": 1,
      "message": "@Eric: do you think that preparing a field \"defaultIndex\" would be acceptable? We always have this need, and today using android properties but why not expecting this from hal?\nOf course, could be done later if not yet agreed.",
      "range": {
        "startLine": 28,
        "startChar": 19,
        "endLine": 28,
        "endChar": 20
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2306644a_dd2aaedf",
        "filename": "media/aidl/android/media/audio/common/AudioHalVolumeGroup.aidl",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1945984
      },
      "writtenOn": "2022-10-05T00:46:53Z",
      "side": 1,
      "message": "I think this should be done in a separate CL even if we do choose to add the defaultIndex in U. \n\nI want to limit the scope of this CL to converting the EngineConfig.h types (and its currently existing dependencies) into AIDL. \nhttps://cs.android.com/android/platform/superproject/+/master:frameworks/av/services/audiopolicy/engine/config/include/EngineConfig.h;drc\u003da12de21829b709ed2b2fcec10f0ba4b501c0511d\n\nI created an internal bug to track the addition of a defaultIndex. I will discuss with Eric if we will be able to add this in U.",
      "parentUuid": "5494db32_081459da",
      "range": {
        "startLine": 28,
        "startChar": 19,
        "endLine": 28,
        "endChar": 20
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b707a2ff_fdc34b2f",
        "filename": "media/aidl/android/media/audio/common/AudioHalVolumeGroup.aidl",
        "patchSetId": 6
      },
      "lineNbr": 28,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2022-10-05T09:53:38Z",
      "side": 1,
      "message": "Agree to add a default index and to to it in a separate CL.",
      "parentUuid": "2306644a_dd2aaedf",
      "range": {
        "startLine": 28,
        "startChar": 19,
        "endLine": 28,
        "endChar": 20
      },
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65d3f411_8ca651fa",
        "filename": "media/aidl/android/media/audio/common/AudioProductStrategyType.aidl",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 1706828
      },
      "writtenOn": "2022-10-04T11:33:42Z",
      "side": 1,
      "message": "SYS_RESERVED_PATCH has been intentionnaly removed?",
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d91218ad_2f499099",
        "filename": "media/aidl/android/media/audio/common/AudioProductStrategyType.aidl",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 1945984
      },
      "writtenOn": "2022-10-05T00:46:53Z",
      "side": 1,
      "message": "Yes, I excluded this on purpose. There isn\u0027t a value for this in the legacyStrategy enum:\nhttps://cs.android.com/android/platform/superproject/+/master:frameworks/av/services/audiopolicy/enginedefault/src/Engine.h;l\u003d31;drc\u003d652335ea7c2f8f281a1b93a1e1558960b6ad1b6f\n\nI know that internally we immediately map STRATEGY_PATH to STRATEGY_REROUTING. \nhttps://cs.android.com/android/platform/superproject/+/master:frameworks/av/services/audiopolicy/enginedefault/src/Engine.cpp;l\u003d56;drc\u003d93666b29869dc7ffa0cc7ee8b68c0ca6ad2bbaa9\n\nSTRATEGY_PATCH is only used in the XMLs right now; I don\u0027t think it\u0027s very meaningful within the framework, though (other than the fact that it has the same behavior as STRATEGY_REROUTING).\n\nNote that even the system strategies that are appended to all strategy configurations don\u0027t even include STRATEGY_PATCH (the strategy is called \"patch\"); I\u0027m guessing this is a bug?:\nhttps://cs.android.com/android/platform/superproject/+/master:frameworks/av/services/audiopolicy/engine/common/src/EngineDefaultConfig.h;l\u003d149;drc\u003da3abb40c82892a47f38eaa81ca5f5e8821143460",
      "parentUuid": "65d3f411_8ca651fa",
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd823a40_83bf9a98",
        "filename": "media/aidl/android/media/audio/common/AudioProductStrategyType.aidl",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2022-10-05T09:53:38Z",
      "side": 1,
      "message": "I think that if we remove the STRATEGY_PATCH we must ensure that the definition of strategy SYS_RESERVED_REROUTING lists 2 volume groups: one for stream   AUDIO_STREAM_REROUTING and one for AUDIO_STREAM_PATCH. Other wise we may fail to find a matching strategy when using the AUDIO_STREAM_PATCH for internal software audio patches",
      "parentUuid": "d91218ad_2f499099",
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bad7da27_243b940a",
        "filename": "media/aidl/android/media/audio/common/AudioProductStrategyType.aidl",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 1945984
      },
      "writtenOn": "2022-10-05T23:46:49Z",
      "side": 1,
      "message": "Action item for Eric: determine if we want to use SYS_RESERVED_REROUTING for both rerouting and patch cases.",
      "parentUuid": "dd823a40_83bf9a98",
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11b155a6_f8ad5000",
        "filename": "media/aidl/android/media/audio/common/AudioProductStrategyType.aidl",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2022-10-06T08:33:56Z",
      "side": 1,
      "message": "We can remove STRATEGY_PATCH.\nwhat is important is that we have a volume group for AUDIO_STREAM_PATCH and probably list it in the audio attributes group for strategy SYS_RESERVED_REROUTING",
      "parentUuid": "bad7da27_243b940a",
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e47dca69_d1c7ccf0",
        "filename": "media/aidl/android/media/audio/common/AudioProductStrategyType.aidl",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 1491204
      },
      "writtenOn": "2022-10-06T08:39:02Z",
      "side": 1,
      "message": "BTW, I remembered that patch \u0026 rerouting strategies were appended programmatically for both engine, and were not embedded in XML.\nAlso, the associated volume group (with matching legacy stream associated in attributes group) were programmatically added.\n\nSo it hide the complexity of internal design, prevent OEM to deal with unecessary things to manage, and ensure a volume group is also associated.",
      "parentUuid": "11b155a6_f8ad5000",
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e13f9718_2367990a",
        "filename": "media/aidl/android/media/audio/common/AudioProductStrategyType.aidl",
        "patchSetId": 6
      },
      "lineNbr": 85,
      "author": {
        "id": 1945984
      },
      "writtenOn": "2022-10-06T19:01:28Z",
      "side": 1,
      "message": "Ack. Nothing to remove. It was already excluded.",
      "parentUuid": "e47dca69_d1c7ccf0",
      "revId": "73241255911fccbab6fd1f686b98bf32e68993dd",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}