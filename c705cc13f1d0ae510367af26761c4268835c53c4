{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "184ca32c_08ab31a2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1081223
      },
      "writtenOn": "2021-02-13T11:23:50Z",
      "side": 1,
      "message": "As per note here a few ways to bypass API restrictions\nhttps://github.com/tiann/FreeReflection, reported as https://issuetracker.google.com/issues/179553953\nhttps://github.com/ChickenHook/RestrictionBypass, left a comment https://android-review.googlesource.com/c/platform/art/+/1208930 on how it works\n\nI know this will break Tinker, but any app can now DoS the device.\nAny input?",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87241a6b_20ecd170",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1010681
      },
      "writtenOn": "2021-02-22T09:55:02Z",
      "side": 1,
      "message": "Do we have evidence that tinker is not using this anymore?",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7856046b_6c15f8df",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1081223
      },
      "writtenOn": "2021-02-22T11:39:09Z",
      "side": 1,
      "message": "I checked their whole framework and I can\u0027t find any usage. Maybe it was an app and not the whole framework itself?\nI searched in github, most ( if not all ) of the users are \"dangerous\" and hook into this class to change its behaviour",
      "parentUuid": "87241a6b_20ecd170",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "396f535a_686e8501",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1320563
      },
      "writtenOn": "2021-02-22T12:27:22Z",
      "side": 1,
      "message": "The sample app can make system crash because ActivityTaskSupervisor#resolveActivity posts setDebugFlagsForStartingActivity (since ActivityTaskManager is separated from ActivityManager) to android.display thread and then setNativeDebuggingAppLocked throws SecurityException due to not debuggable build.\n\nSo the accurate fix might be to move the validation of flags to resolveActivity. That throws SecurityException at binder thread to crash the abnormal caller.\n\nOtherwise if there are still places that can get the IBinder, the problem still exists.",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5860830f_8786939c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1381446
      },
      "writtenOn": "2021-02-23T05:09:04Z",
      "side": 1,
      "message": "Curious if the UnsupportedAppUsage annotation on the singleton exposed the reflection possibilities of all the APIs of the object?\n\nAlso wondering if all of the APIs are being used by tinker or just some of them?",
      "parentUuid": "7856046b_6c15f8df",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5f1f3eb_8dac837a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1081223
      },
      "writtenOn": "2021-02-23T10:02:30Z",
      "side": 1,
      "message": "I saw there quite a few checks on the server side, should them all be moved to the client?\nFor starters setTrackAllocationApp, setNativeDebuggingAppLocked, setProfileApp, and possibly setDebugApp ( but this time it\u0027s a permission check, not debug vs non-debug check )\nAt least these seem the one able to crash the stack",
      "parentUuid": "396f535a_686e8501",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35bddda2_d893ae57",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1081223
      },
      "writtenOn": "2021-02-23T10:02:30Z",
      "side": 1,
      "message": "I\u0027ve been told the annotation has been removed in 12.\nAside from that, given how we can simply override startActivity I think all the fields can be made accessible via reflection.",
      "parentUuid": "5860830f_8786939c",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6699eb5_77934a70",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1381446
      },
      "writtenOn": "2021-02-23T10:32:36Z",
      "side": 1,
      "message": "Hmm, I\u0027m able to reproduce the system crash on Android 10, but not on Android 11 emulator (RSR1.200819.001.A1).\n\nThe sample app crashed with below log on Android 11.\nFATAL EXCEPTION: main\nProcess: org.chickenhook.startflagexploit, PID: 9576\njava.lang.IllegalArgumentException: Unknown URI type: 1919184481\n\tat android.net.Uri$1.createFromParcel(Uri.java:1818)\n\tat android.net.Uri$1.createFromParcel(Uri.java:1807)\n\tat android.content.Intent.readFromParcel(Intent.java:10875)\n\tat org.chickenhook.startflagexploit.MainActivity.startActivityHook(MainActivity.kt:63)\n\tat org.chickenhook.startflagexploit.MainActivity$crash$1.transact(MainActivity.kt:154)\n\tat org.chickenhook.binderhooks.ProxyHook$FakeBinder.transact(ProxyHook.java:112)\n\tat android.app.IActivityTaskManager$Stub$Proxy.startActivity(IActivityTaskManager.java:3692)\n\tat android.app.Instrumentation.execStartActivity(Instrumentation.java:1862)\n\tat android.app.Activity.startActivityForResult(Activity.java:6038)\n\tat android.app.Activity.requestPermissions(Activity.java:5225)\n\tat androidx.core.app.ActivityCompat.requestPermissions(ActivityCompat.java:502)\n\tat org.chickenhook.startflagexploit.MainActivity.crash(MainActivity.kt:171)\n\tat org.chickenhook.startflagexploit.MainActivity$onCreate$1.onClick(MainActivity.kt:26)",
      "parentUuid": "c5f1f3eb_8dac837a",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b772d21_1ec8d8ab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1081223
      },
      "writtenOn": "2021-02-23T10:36:39Z",
      "side": 1,
      "message": "Is the emulator running userdebug?\nThe throws are skipped in this case",
      "parentUuid": "c6699eb5_77934a70",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e31bc0fe_c10df7c1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1081223
      },
      "writtenOn": "2021-03-03T11:03:49Z",
      "side": 1,
      "message": "I tried on 11 and indeed it doesn\u0027t crash, as far as I can tell ActivityTaskManager is still using the Singleton but is blocked somehow. Maybe the singleton layout changed itself\nI\u0027ll try digging in the preview.",
      "parentUuid": "9b772d21_1ec8d8ab",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "419197bf_6038a188",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1081223
      },
      "writtenOn": "2021-03-03T15:19:38Z",
      "side": 1,
      "message": "Sorry on 12, typo",
      "parentUuid": "e31bc0fe_c10df7c1",
      "revId": "c705cc13f1d0ae510367af26761c4268835c53c4",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}