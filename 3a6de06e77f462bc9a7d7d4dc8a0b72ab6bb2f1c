{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c8c9ba37_88f6c5da",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1561214
      },
      "writtenOn": "2021-01-30T00:32:04Z",
      "side": 1,
      "message": "Maybe SparseArray is better in terms of memory usage",
      "range": {
        "startLine": 62,
        "startChar": 18,
        "endLine": 62,
        "endChar": 25
      },
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3fe62294_d58b29e9",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2021-02-01T21:52:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c8c9ba37_88f6c5da",
      "range": {
        "startLine": 62,
        "startChar": 18,
        "endLine": 62,
        "endChar": 25
      },
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "822c00e2_11509362",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 114,
      "author": {
        "id": 1561214
      },
      "writtenOn": "2021-01-30T00:32:04Z",
      "side": 1,
      "message": "nit: just return from here, no need to throw the exception and catch it again below?",
      "range": {
        "startLine": 114,
        "startChar": 16,
        "endLine": 114,
        "endChar": 50
      },
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d3495984_58fc0175",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 114,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2021-02-01T21:52:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "822c00e2_11509362",
      "range": {
        "startLine": 114,
        "startChar": 16,
        "endLine": 114,
        "endChar": 50
      },
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9dcba40_b833a6bb",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 146,
      "author": {
        "id": 1561214
      },
      "writtenOn": "2021-01-30T00:32:04Z",
      "side": 1,
      "message": "A bit concerned about the open FDs here. As the files could be from tombstone_000 to tombstone_999, if there are 1000 tombstone files, we\u0027d have to keep 1000 open FDs. Some OEM might just have keep the max_fd to 1024.",
      "range": {
        "startLine": 146,
        "startChar": 8,
        "endLine": 146,
        "endChar": 40
      },
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1ed49e08_2d035680",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 146,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2021-02-01T21:52:28Z",
      "side": 1,
      "message": "The default maximum is 32, but I wanted to be generous. Lowered the limit to 99, that ought to be enough for anybody...",
      "parentUuid": "f9dcba40_b833a6bb",
      "range": {
        "startLine": 146,
        "startChar": 8,
        "endLine": 146,
        "endChar": 40
      },
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "929684e0_435c82a8",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 180,
      "author": {
        "id": 1561214
      },
      "writtenOn": "2021-01-30T00:32:04Z",
      "side": 1,
      "message": "By the end of this function, this variable is out of scope, and it could be GCed, and its finalize() could be called, in which the underline FD will be closed",
      "range": {
        "startLine": 180,
        "startChar": 12,
        "endLine": 180,
        "endChar": 36
      },
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92d9df59_2b3f62b1",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 180,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2021-02-01T21:52:28Z",
      "side": 1,
      "message": "FileInputStream(FileDescriptor) won\u0027t close its FD on Android: isFdOwner is set to false so finalize won\u0027t call close: https://cs.android.com/android/platform/superproject/+/master:libcore/ojluni/src/main/java/java/io/FileInputStream.java;l\u003d200\n\n(upstream OpenJDK is more complicated, but vaguely similar)",
      "parentUuid": "929684e0_435c82a8",
      "range": {
        "startLine": 180,
        "startChar": 12,
        "endLine": 180,
        "endChar": 36
      },
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27cd9b17_6024044f",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 212,
      "author": {
        "id": 1561214
      },
      "writtenOn": "2021-01-30T00:32:04Z",
      "side": 1,
      "message": "There could be isolated processes (typically we see it with the Chrome), which we can\u0027t map them to the appId directly. Will the code which generates the tombstone do the translation from isolated process to its actual uid?",
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd2b4a0f_690a47de",
        "filename": "services/core/java/com/android/server/os/NativeTombstoneManager.java",
        "patchSetId": 2
      },
      "lineNbr": 212,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2021-02-01T21:52:28Z",
      "side": 1,
      "message": "Can the process figure out its original UID purely off of uids/groups? If not, then it can\u0027t.\n\nHopefully we can decode it from inside system_server?",
      "parentUuid": "27cd9b17_6024044f",
      "revId": "3a6de06e77f462bc9a7d7d4dc8a0b72ab6bb2f1c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}