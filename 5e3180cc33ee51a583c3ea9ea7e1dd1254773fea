{
  "comments": [
    {
      "key": {
        "uuid": "70166170_f5b591e5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1542950
      },
      "writtenOn": "2020-08-14T18:42:45Z",
      "side": 1,
      "message": "Why is this change necessary?\nIt\u0027s not included in the original AOSP code.",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc223a9f_69d129b7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1137899
      },
      "writtenOn": "2020-08-18T01:04:43Z",
      "side": 1,
      "message": "1396412 without 1396409 produces the error as following:\n\nFAILED: //development/build:android_test_stubs_current turbine [common]\nOutputs: out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/android_test_stubs_current.jar\nError: exited with code: 1\nCommand: rm -rf \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/classes\" \u0026\u0026 mkdir -p \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/classes\" \u0026\u0026 prebuilts/jdk/jdk9/linux-x86/bin/java -jar out/soong/host/linux-x86/framework/turbine.jar --output out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/android_test_stubs_current.jar.tmp --temp_dir \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/classes\" --sources @out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/android_test_stubs_current.jar.rsp  --source_jars out/soong/.intermediates/frameworks/base/test-api-stubs-docs/android_common/test-api-stubs-docs-stubs.srcjar --javacopts -Xmaxerrs 9999999 -encoding UTF-8 -sourcepath \"\" -g -XDskipDuplicateBridges\u003dtrue -XDstringConcat\u003dinline  -source 1.8 -target 1.8 -- --bootclasspath \"\" --classpath out/soong/.intermediates/tools/metalava/stub-annotations/android_common/turbine-combined/stub-annotations.jar --classpath out/soong/.intermediates/tools/metalava/private-stub-annotations-jar/android_common/turbine-combined/private-stub-annotations-jar.jar \u0026\u0026 prebuilts/build-tools/linux-x86/bin/ziptime out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/android_test_stubs_current.jar.tmp \u0026\u0026 (if cmp -s out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/android_test_stubs_current.jar.tmp out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/android_test_stubs_current.jar ; then rm out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/android_test_stubs_current.jar.tmp ; else mv out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/android_test_stubs_current.jar.tmp out/soong/.intermediates/development/build/android_test_stubs_current/android_common/turbine/android_test_stubs_current.jar ; fi )\nOutput:\nandroid/telephony/CellIdentityNr.java:32: error: could not resolve android.hardware.radio.V1_4.CellIdentityNr\nCellIdentityNr(android.hardware.radio.V1_4.CellIdentityNr cid) { super(null, 0, null); throw new RuntimeException(\"Stub!\"); }\n               ^\n\n\n\nFAILED: //development/build:android_test_stubs_current javac [common]\nOutputs: out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/android_test_stubs_current.jar\nError: exited with code: 1\nCommand: rm -rf \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/classes\" \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/anno\" \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/srcjars\" \u0026\u0026 mkdir -p \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/classes\" \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/anno\" \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/srcjars\" \u0026\u0026 out/soong/host/linux-x86/bin/zipsync -d out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/srcjars -l out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/srcjars/list -f \"*.java\" out/soong/.intermediates/frameworks/base/test-api-stubs-docs/android_common/test-api-stubs-docs-stubs.srcjar \u0026\u0026 (if [ -s out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/srcjars/list ] || [ -s out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/android_test_stubs_current.jar.rsp ] ; then out/soong/host/linux-x86/bin/soong_javac_wrapper prebuilts/jdk/jdk9/linux-x86/bin/javac -J-Xmx2048M -Xmaxerrs 9999999 -encoding UTF-8 -sourcepath \"\" -g -XDskipDuplicateBridges\u003dtrue -XDstringConcat\u003dinline  -proc:none  -bootclasspath \"\" -classpath out/soong/.intermediates/tools/metalava/stub-annotations/android_common/turbine-combined/stub-annotations.jar:out/soong/.intermediates/tools/metalava/private-stub-annotations-jar/android_common/turbine-combined/private-stub-annotations-jar.jar -source 1.8 -target 1.8 -d out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/classes -s out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/anno @out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/android_test_stubs_current.jar.rsp @out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/srcjars/list ; fi ) \u0026\u0026 out/soong/host/linux-x86/bin/soong_zip -jar -o out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/android_test_stubs_current.jar -C out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/classes -D out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/classes \u0026\u0026 rm -rf \"out/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/srcjars\"\nOutput:\n^[[1mout/soong/.intermediates/development/build/android_test_stubs_current/android_common/javac/srcjars/android/telephony/CellIdentityNr.java:32: ^[[31merror:^[[0m^[[1m package android.hardware.radio.V1_4 does not exist^[[0m\nCellIdentityNr(android.hardware.radio.V1_4.CellIdentityNr cid) { super(null, 0, null); throw new RuntimeException(\"Stub!\"); }\n^[[1m                                          ^[[32m^^[[0m^[[1m^[[0m\n1 error\n",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e0c72d6b_94d4055c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1542950
      },
      "writtenOn": "2020-08-18T22:51:37Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "fc223a9f_69d129b7",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8379be83_9b8868b2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-08-19T02:09:16Z",
      "side": 1,
      "message": "Need to merge this to aosp-main(master) first: aosp/1403550",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c6b800b8_3b681291",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-08-19T04:31:36Z",
      "side": 1,
      "message": "Having a closer look, why would the added default constructor resolve the missing android.hardware.radio.V1_4.CellIdentityNr?",
      "parentUuid": "8379be83_9b8868b2",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44da2ec2_24b2a5e4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1137899
      },
      "writtenOn": "2020-08-19T06:27:51Z",
      "side": 1,
      "message": "Without default constructor, android build system generates a stub class with the constructor :\nCellIdentityNr(android.hardware.radio.V1_4.CellIdentityNr cid).\n\nWith default constructor, the build generates a stub with the default constructor instead of the one above.",
      "parentUuid": "c6b800b8_3b681291",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54387d44_5c4c4ad2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-08-19T08:22:57Z",
      "side": 1,
      "message": "+jiyong to take a look at the error when generating the stub class",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b8cb43d9_7359dbe5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-08-19T08:22:57Z",
      "side": 1,
      "message": "But why would it be a problem that the build system generates the stub class with CellIdentityNr(android.hardware.radio.V1_4.CellIdentityNr cid)?",
      "parentUuid": "44da2ec2_24b2a5e4",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6663eacc_1e85e75d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1132673
      },
      "writtenOn": "2020-08-19T09:16:35Z",
      "side": 1,
      "message": "This is due to matalava being old. There are several changes that are missing in the android10-gsi branch. Cherry-picking the following changes fixes the problem.\n\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1123518/2\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1123977/3\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1123519/4\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1120992/5\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1041188/",
      "parentUuid": "54387d44_5c4c4ad2",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32f8b378_78eb1da8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-08-19T09:44:42Z",
      "side": 1,
      "message": "Thanks Jiyong! Here\u0027s the cherry picks:\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1404528/\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1404527/\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1404529/\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1404530/\nhttps://android-review.googlesource.com/c/platform/tools/metalava/+/1404531/",
      "parentUuid": "6663eacc_1e85e75d",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2066799_dcf06fb0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-08-20T16:13:19Z",
      "side": 1,
      "message": "Jake, the metalava CLs are merged. Please check if they fix your build issue.",
      "parentUuid": "32f8b378_78eb1da8",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85d54621_b0e4ebda",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-08-21T04:17:36Z",
      "side": 1,
      "message": "This CL shouldn\u0027t be needed now that the metalava patches are merged. Please confirm.",
      "revId": "5e3180cc33ee51a583c3ea9ea7e1dd1254773fea",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}