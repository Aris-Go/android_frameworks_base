{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e8c68e10_335e0870",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1221112
      },
      "writtenOn": "2023-09-20T09:51:23Z",
      "side": 1,
      "message": "please have a look",
      "revId": "8c1c73791a0bc188b2a5e83b06f7dca806632735",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4b04b4a0_dd6795d7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1553715
      },
      "writtenOn": "2023-09-20T13:31:58Z",
      "side": 1,
      "message": "Evan, do you know why we used `plugged` instead of `charging` to determine when to show the lightning bolt on the battery icon? I figure there\u0027s a good reason, but this code has existed long before I joined the team.",
      "revId": "8c1c73791a0bc188b2a5e83b06f7dca806632735",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9026f0af_c9838584",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1146169
      },
      "writtenOn": "2023-09-20T18:20:09Z",
      "side": 1,
      "message": "I honestly do not know the reason, as this code predates my tenure as well (so it\u0027s at least older than 7 years at this point). Assuming that `charged` and `plugged` mean what we expect them to (actually charging vs just having a wired connection that may not be charging) then this seems reasonable to me.",
      "parentUuid": "4b04b4a0_dd6795d7",
      "revId": "8c1c73791a0bc188b2a5e83b06f7dca806632735",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6724677a_fdae002c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1221112
      },
      "writtenOn": "2023-09-20T21:11:22Z",
      "side": 1,
      "message": "seems TreeHugger cannot merge",
      "revId": "8c1c73791a0bc188b2a5e83b06f7dca806632735",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9925f2c_7c24f100",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1553715
      },
      "writtenOn": "2023-10-02T18:45:45Z",
      "side": 1,
      "message": "I had a realization while working on a different feature: I believe one of the reasons we use `plugged` instead of `charging` is for when your device is plugged in but already at 100%. In this case, the device is not charging, but users still want to see the lightning bolt to know that the device is plugged in and the device will charge when the battery decreases again.\n\nBased on the CL description, there\u0027s a different UX issue where if the device is plugged in but also overheated, we\u0027re showing the lightning bolt but we shouldn\u0027t be. I do agree we need to solve that. Is there a framework callback that will tell us when the device isn\u0027t charging due to it being too hot? Can we use that information and send that to `BatteryMeterView` to not show the lightning bolt in this case, but still show it when plugged but not charging?",
      "parentUuid": "9026f0af_c9838584",
      "revId": "8c1c73791a0bc188b2a5e83b06f7dca806632735",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "968d1301_4c44a74e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1221112
      },
      "writtenOn": "2023-10-04T09:57:07Z",
      "side": 1,
      "message": "Sorry Caitlin, I am not sure I see the point of having the lightning bolt show if the device is not charging but connected. I think we may make this more complicated than it is ðŸ˜Š . The overheating is just one scenario that leads to this bug another one could be as you say that the device is fully charged. It is possibly easier to see that the cable is inserted than looking at the icon and as you say if the charge is 100% then it is also quite obvious that there is nothing more to do.",
      "parentUuid": "e9925f2c_7c24f100",
      "revId": "8c1c73791a0bc188b2a5e83b06f7dca806632735",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0130f79_581210a6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 1146169
      },
      "writtenOn": "2023-10-04T14:33:39Z",
      "side": 1,
      "message": "Caitlin and I chatted about this for a while this morning, and I\u0027m going to change my mind here and go back to being in favor of the `plugged` state as the most-correct thing here. There are a number of reasons:\n\n1. As far as we can tell from the git history, AOSP has behaved this way for at least a decade.\n2. We actually already consider the device to be `charging` if the battery is considered charging _or_ full. So we would still show the lightning bolt in the \"full but not charging\" case anyway\n3. Battery settings shows a more complete picture of the actual state\n4. Probably most importantly, I think that reflecting _only_ the charging state is going to make people think that their cables are broken. Correct or not, Android has had the equivalency of \"lightning bolt \u003d plugged in (and probably charging)\" for a long time, and users likely expect that instant feedback when they plug in a device. Just testing here this morning, I plugged in my device and the system took over 20 seconds to start reporting that it was charging. This delayed feedback I think would lead to a poor user experience, since you typically only need to know \"is my device plugged in\" and you trust that once it reports that accurately it will begin charging.\n\nAll of this said, I am in favor of supporting a config if other OEMs wish to more easily customize this behavior. If you wish to add a `config_preferBatteryStatusOverPlugged` (feel free to come up with a better name ðŸ˜Š) and rework this CL to use that config, we\u0027d be happy to merge that upstream. As far as AOSP is concerned, I would recommend that we keep the default behavior the same for the reasons stated above.\n\nWe will continue to keep this information in mind, as we are actively exploring ways to more accurately represent and communicate the detailed battery state of devices. And we really do appreciate your feedback and consideration here.",
      "parentUuid": "968d1301_4c44a74e",
      "revId": "8c1c73791a0bc188b2a5e83b06f7dca806632735",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}