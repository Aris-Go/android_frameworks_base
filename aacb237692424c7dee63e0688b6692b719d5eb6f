{
  "comments": [
    {
      "key": {
        "uuid": "2d3b08df_995e3ffe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 12,
      "author": {
        "id": 1120915
      },
      "writtenOn": "2020-01-14T04:00:21Z",
      "side": 1,
      "message": "This will be done within this CL, right?",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 4
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee3a734f_7d74e16a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 12,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-14T10:23:03Z",
      "side": 1,
      "message": "I\u0027d like to do it in a follow-up CL, as it\u0027s blocked by yet another CL..",
      "parentUuid": "2d3b08df_995e3ffe",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 4
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d90c7f8d_71b6775c",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 31,
      "author": {
        "id": 1120915
      },
      "writtenOn": "2020-01-14T04:00:21Z",
      "side": 1,
      "message": "nit: as it\u0027s an internal class for the package com.android.dynsystem, this can be just KeyRevocationList.",
      "range": {
        "startLine": 31,
        "startChar": 6,
        "endLine": 31,
        "endChar": 36
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "344e9bb4_2f70295a",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 31,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-14T13:01:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d90c7f8d_71b6775c",
      "range": {
        "startLine": 31,
        "startChar": 6,
        "endLine": 31,
        "endChar": 36
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "baebf98f_6e1db76d",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 33,
      "author": {
        "id": 1120915
      },
      "writtenOn": "2020-01-14T04:00:21Z",
      "side": 1,
      "message": "nit: could be shortened a little bit, otherwise it\u0027s not fully displayed on logcat. e.g., DsuKeyRevocationList",
      "range": {
        "startLine": 33,
        "startChar": 39,
        "endLine": 33,
        "endChar": 69
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0096c19_fd51e2ff",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 33,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-14T13:01:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "baebf98f_6e1db76d",
      "range": {
        "startLine": 33,
        "startChar": 39,
        "endLine": 33,
        "endChar": 69
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee88e0f2_004badae",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 49,
      "author": {
        "id": 1120915
      },
      "writtenOn": "2020-01-14T04:00:21Z",
      "side": 1,
      "message": "Can this be a HashMap? I suppose keys are unique?",
      "range": {
        "startLine": 49,
        "startChar": 37,
        "endLine": 49,
        "endChar": 45
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2894f1d_9756ab40",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 49,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-14T13:01:42Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ee88e0f2_004badae",
      "range": {
        "startLine": 49,
        "startChar": 37,
        "endLine": 49,
        "endChar": 45
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d27b95d6_ef3a4195",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 94,
      "author": {
        "id": 1120915
      },
      "writtenOn": "2020-01-14T04:00:21Z",
      "side": 1,
      "message": "Ideally this can be a singleton, so that we don\u0027t need to load it from the internet every time we need it.",
      "range": {
        "startLine": 94,
        "startChar": 15,
        "endLine": 94,
        "endChar": 19
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7aa9d2c7_183199a2",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 94,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-14T04:48:49Z",
      "side": 1,
      "message": "I think the whole point of the revocation list is to load it from the internet every time, so that the list content don\u0027t go stale.\nWhen the list is updated, the change needs to reach the end users as soon as possible. If this was a singleton, then it\u0027s possible that an end user won\u0027t fetch the new list until the device is rebooted or system-server restarted.",
      "parentUuid": "d27b95d6_ef3a4195",
      "range": {
        "startLine": 94,
        "startChar": 15,
        "endLine": 94,
        "endChar": 19
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ebf854f_00f32508",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 94,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-01-14T09:28:12Z",
      "side": 1,
      "message": "There is still an opportunity to reduce the network bandwidth and client processing by leveraging the \"if-modified-since\" field in HTTP request (or URLConnection).\nWe may re-think the API (e.g., call update() before getRevocationEntryForKey()) to incorporate this.",
      "parentUuid": "7aa9d2c7_183199a2",
      "range": {
        "startLine": 94,
        "startChar": 15,
        "endLine": 94,
        "endChar": 19
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d8b815d_a75614d0",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 94,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-14T10:23:03Z",
      "side": 1,
      "message": "hmm, that doesn\u0027t sound right to me. That would mean for each call to getRevocationEntryForKey(), we would do a if-modified-since HTTP GET just to check if we need to update the list. That sounds more bandwidth consuming .",
      "parentUuid": "2ebf854f_00f32508",
      "range": {
        "startLine": 94,
        "startChar": 15,
        "endLine": 94,
        "endChar": 19
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6925c9c8_d7cfdf12",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 94,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-01-15T02:17:49Z",
      "side": 1,
      "message": "Why do you want to do it in each call to getRevocationEntryForKey()? It should be in the same cadence as what it is in the current CL.",
      "parentUuid": "4d8b815d_a75614d0",
      "range": {
        "startLine": 94,
        "startChar": 15,
        "endLine": 94,
        "endChar": 19
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7cc58e0_1b922e20",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 94,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-15T03:27:08Z",
      "side": 1,
      "message": "Got it. However I don\u0027t feel confortable using \"if-modified-since\" field, because it depends on the server\u0027s clock and we cannot ensure the server clock won\u0027t skew. how about \"etag\" \u0026 \"if-none-match\"",
      "parentUuid": "6925c9c8_d7cfdf12",
      "range": {
        "startLine": 94,
        "startChar": 15,
        "endLine": 94,
        "endChar": 19
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36cc71ee_c87dfeff",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 94,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-01-15T09:48:05Z",
      "side": 1,
      "message": "You\u0027re right. etag+if-none-match is more reliable.",
      "parentUuid": "c7cc58e0_1b922e20",
      "range": {
        "startLine": 94,
        "startChar": 15,
        "endLine": 94,
        "endChar": 19
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb86ddf4_bb46d6d7",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/DynamicSystemKeyRevocationList.java",
        "patchSetId": 11
      },
      "lineNbr": 94,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-15T10:39:44Z",
      "side": 1,
      "message": "Used HttpResponseCache to take care of this. Tested locally that the cache works with https://developer.android.com/reference/android/net/http/HttpResponseCache.html#getHitCount()",
      "parentUuid": "36cc71ee_c87dfeff",
      "range": {
        "startLine": 94,
        "startChar": 15,
        "endLine": 94,
        "endChar": 19
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "494d3f21_63e06eb7",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/InstallationAsyncTask.java",
        "patchSetId": 11
      },
      "lineNbr": 246,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-01-14T09:28:12Z",
      "side": 1,
      "message": "Inline this method and make mIsNetworkUrl a local var?",
      "range": {
        "startLine": 246,
        "startChar": 12,
        "endLine": 246,
        "endChar": 39
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81a2778e_e60fc3f8",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/InstallationAsyncTask.java",
        "patchSetId": 11
      },
      "lineNbr": 246,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-14T10:23:03Z",
      "side": 1,
      "message": "keyRevocationThrowOrWarning() shall have other users when I complete the TODOs. Such as post-install key check would call keyRevocationThrowOrWarning() when check is failed.",
      "parentUuid": "494d3f21_63e06eb7",
      "range": {
        "startLine": 246,
        "startChar": 12,
        "endLine": 246,
        "endChar": 39
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "063a6a78_fa3f9220",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/InstallationAsyncTask.java",
        "patchSetId": 11
      },
      "lineNbr": 246,
      "author": {
        "id": 1061057
      },
      "writtenOn": "2020-01-15T02:17:49Z",
      "side": 1,
      "message": "In that case, move the assignment line to the constructor and make mIsNewtorkUrl final.",
      "parentUuid": "81a2778e_e60fc3f8",
      "range": {
        "startLine": 246,
        "startChar": 12,
        "endLine": 246,
        "endChar": 39
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01207861_ea98f402",
        "filename": "packages/DynamicSystemInstallationService/src/com/android/dynsystem/InstallationAsyncTask.java",
        "patchSetId": 11
      },
      "lineNbr": 246,
      "author": {
        "id": 1337669
      },
      "writtenOn": "2020-01-15T10:39:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "063a6a78_fa3f9220",
      "range": {
        "startLine": 246,
        "startChar": 12,
        "endLine": 246,
        "endChar": 39
      },
      "revId": "aacb237692424c7dee63e0688b6692b719d5eb6f",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}