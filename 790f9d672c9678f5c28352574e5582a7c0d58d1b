{
  "comments": [
    {
      "key": {
        "uuid": "93345c39_e7317314",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 9,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T03:21:14Z",
      "side": 1,
      "message": "sorry for lack of context, could you help to describe what this is doing, and why this is needed?",
      "range": {
        "startLine": 9,
        "startChar": 8,
        "endLine": 9,
        "endChar": 16
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ff684cc_bcf58ced",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 9,
      "author": {
        "id": 1199008
      },
      "writtenOn": "2020-09-26T03:38:46Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "93345c39_e7317314",
      "range": {
        "startLine": 9,
        "startChar": 8,
        "endLine": 9,
        "endChar": 16
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1543efa6_df9fd0df",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 10,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T03:21:14Z",
      "side": 1,
      "message": "Could you help to add Bug: and put some detail on the bugnizer for future reference?\nAlso Test: to describe what has been tested.",
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd414b1c_447cfa3f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 10,
      "author": {
        "id": 1199008
      },
      "writtenOn": "2020-09-26T03:38:46Z",
      "side": 1,
      "message": "We will add below \nBug: 149109043\nTest: OffloadHardwareInterfaceTest",
      "parentUuid": "1543efa6_df9fd0df",
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c76bcecc_d9e93b3c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 10
      },
      "lineNbr": 10,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "SGTM\nIIUC there are 2 OffloadHardwareInterfaceTest, maybe you want to be more specific?",
      "parentUuid": "cd414b1c_447cfa3f",
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fd4b5729_55739ea6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-09-26T06:13:07Z",
      "side": 1,
      "message": "LGTM once Junyu\u0027s and my comments addressed.\n\nI think the existence of this CL points out to us the need for future CLS to have better unit tests :-)\n\nIf we had already had the privileged tests when we wrote the original code, then we probably would have added this test at that time and would not have had to scramble to fix it. Well, at least we now have the infrastructure in place.",
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9443a550_f7f309f2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-09-27T14:23:49Z",
      "side": 1,
      "message": "Fails to build with:\n\nframeworks/base/packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java:24: error: cannot find symbol\nimport static com.android.networkstack.tethering.OffloadHardwareInterface.IPCTNL_MSG_CT_NEW;\n^\n  symbol:   static IPCTNL_MSG_CT_NEW\n  location: class OffloadHardwareInterface\nframeworks/base/packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java:26: error: cannot find symbol\nimport static com.android.networkstack.tethering.OffloadHardwareInterface.NF_NETLINK_CONNTRACK_DESTROY;\n^\n  symbol:   static NF_NETLINK_CONNTRACK_DESTROY\n  location: class OffloadHardwareInterface\nframeworks/base/packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java:27: error: cannot find symbol\nimport static com.android.networkstack.tethering.OffloadHardwareInterface.NF_NETLINK_CONNTRACK_NEW;\n^\n  symbol:   static NF_NETLINK_CONNTRACK_NEW\n  location: class OffloadHardwareInterface\nframeworks/base/packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java:99: error: cannot find symbol\n                NF_NETLINK_CONNTRACK_NEW | NF_NETLINK_CONNTRACK_DESTROY);\n                ^\n  symbol:   variable NF_NETLINK_CONNTRACK_NEW\n  location: class OffloadHardwareInterfaceTest\nframeworks/base/packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java:99: error: cannot find symbol\n                NF_NETLINK_CONNTRACK_NEW | NF_NETLINK_CONNTRACK_DESTROY);\n                                           ^\n  symbol:   variable NF_NETLINK_CONNTRACK_DESTROY\n  location: class OffloadHardwareInterfaceTest\nframeworks/base/packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java:115: error: cannot find symbol\n            if (nlmsghdr.nlmsg_type \u003d\u003d ((NFNL_SUBSYS_CTNETLINK \u003c\u003c 8) | IPCTNL_MSG_CT_NEW)) {\n                                                                       ^\n  symbol:   variable IPCTNL_MSG_CT_NEW\n  location: class OffloadHardwareInterfaceTest\n6 errors\n",
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "65289c32_be701f9c",
        "filename": "packages/Tethering/src/com/android/networkstack/tethering/OffloadHardwareInterface.java",
        "patchSetId": 10
      },
      "lineNbr": 272,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T03:21:14Z",
      "side": 1,
      "message": "If this is specific for StructNfGenMsg, then maybe this will need rename?",
      "range": {
        "startLine": 272,
        "startChar": 16,
        "endLine": 272,
        "endChar": 34
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d77000f1_6b58baa5",
        "filename": "packages/Tethering/src/com/android/networkstack/tethering/OffloadHardwareInterface.java",
        "patchSetId": 10
      },
      "lineNbr": 272,
      "author": {
        "id": 1199008
      },
      "writtenOn": "2020-09-26T03:38:46Z",
      "side": 1,
      "message": "THis code has been discussed in detail and already approved.We don\u0027t want to change the function at this time.",
      "parentUuid": "65289c32_be701f9c",
      "range": {
        "startLine": 272,
        "startChar": 16,
        "endLine": 272,
        "endChar": 34
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "756f72e4_14265e65",
        "filename": "packages/Tethering/src/com/android/networkstack/tethering/OffloadHardwareInterface.java",
        "patchSetId": 10
      },
      "lineNbr": 272,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "nit: You are already changing this function, right? And consider we\u0027ll need to send other type of netlink messages in future, what name we should use?\nThat being said, no strong opinion for this, given that we could always rename it when needed.",
      "parentUuid": "d77000f1_6b58baa5",
      "range": {
        "startLine": 272,
        "startChar": 16,
        "endLine": 272,
        "endChar": 34
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d2fdaead_a57c3296",
        "filename": "packages/Tethering/src/com/android/networkstack/tethering/OffloadHardwareInterface.java",
        "patchSetId": 10
      },
      "lineNbr": 272,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-09-26T06:13:07Z",
      "side": 1,
      "message": "+1 to renaming the method because you are changing the behaviour of the method to be specific to generic netlink.\n\nThe fact that the code was previously discussed in detail does not mean we should not change it now.",
      "parentUuid": "756f72e4_14265e65",
      "range": {
        "startLine": 272,
        "startChar": 16,
        "endLine": 272,
        "endChar": 34
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "db99dfbd_d3476a3a",
        "filename": "packages/Tethering/src/com/android/networkstack/tethering/OffloadHardwareInterface.java",
        "patchSetId": 10
      },
      "lineNbr": 286,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T03:21:14Z",
      "side": 1,
      "message": "Maybe add comment to say what and why this section is doing?",
      "range": {
        "startLine": 285,
        "startChar": 8,
        "endLine": 286,
        "endChar": 29
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cca3702a_f99a45b8",
        "filename": "packages/Tethering/src/com/android/networkstack/tethering/OffloadHardwareInterface.java",
        "patchSetId": 10
      },
      "lineNbr": 286,
      "author": {
        "id": 1199008
      },
      "writtenOn": "2020-09-26T03:38:46Z",
      "side": 1,
      "message": "This is required to format the netlink correctly otherwise kernel rejects it. ConntrackMessage.java also uses this. Do you still want a comment here.",
      "parentUuid": "db99dfbd_d3476a3a",
      "range": {
        "startLine": 285,
        "startChar": 8,
        "endLine": 286,
        "endChar": 29
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba35c025_6d8ad39d",
        "filename": "packages/Tethering/src/com/android/networkstack/tethering/OffloadHardwareInterface.java",
        "patchSetId": 10
      },
      "lineNbr": 286,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "Yes, assuming I will need to maintain this file in future.\nI don\u0027t really know how to check the correctness of these lines.\nSo my answer is yes, maybe show me(and future developers) where to look at when something is wrong?",
      "parentUuid": "cca3702a_f99a45b8",
      "range": {
        "startLine": 285,
        "startChar": 8,
        "endLine": 286,
        "endChar": 29
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7a19a77_8d9b67a0",
        "filename": "packages/Tethering/src/com/android/networkstack/tethering/OffloadHardwareInterface.java",
        "patchSetId": 10
      },
      "lineNbr": 286,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-09-26T06:13:07Z",
      "side": 1,
      "message": "Maybe say that this is a generic netlink request so we need to add the generic netlink header?",
      "parentUuid": "ba35c025_6d8ad39d",
      "range": {
        "startLine": 285,
        "startChar": 8,
        "endLine": 286,
        "endChar": 29
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89c3ef71_69be2903",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 1,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T03:21:14Z",
      "side": 1,
      "message": "IIUC there is already a frameworks/base/packages/Tethering/tests/unit/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java.\nIs it better to add your test there instead of create a new file?",
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ca9bd10_8b5969e3",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 1,
      "author": {
        "id": 1199008
      },
      "writtenOn": "2020-09-26T03:38:46Z",
      "side": 1,
      "message": "We need to add it here as we are creating a socket and need to be privileged. Also Lorenzo recommended us.",
      "parentUuid": "89c3ef71_69be2903",
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29a7eb6a_b8f7fc69",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 1,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "7ca9bd10_8b5969e3",
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4bd91e9e_209a413f",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 1,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-09-26T06:13:07Z",
      "side": 1,
      "message": "Right, I don\u0027t think this code would work in the existing test because it needs CAP_NET_ADMIN. you could argue that the existing test should move to TetheringPrivilegedTests as well, but is where in a hurry to merge this CL then we don\u0027t need to do that now. Maybe add a TODO to the existing test (or here) to unify the two tests?\n\nAlso, are both the tests called OffloadHardwareInterfaceTest? If so that will be confusing because \"atest OffloadHardwareInterfaceTest\" won\u0027t know what to do. In that case, maybe rename this new one?",
      "parentUuid": "29a7eb6a_b8f7fc69",
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a01fc4b3_7fe6ca9d",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 65,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "dead code?",
      "range": {
        "startLine": 65,
        "startChar": 3,
        "endLine": 65,
        "endChar": 62
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "11dabd99_0d0256c4",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 88,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "nit: final?\nAlso applies to variables below.",
      "range": {
        "startLine": 88,
        "startChar": 8,
        "endLine": 88,
        "endChar": 25
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b96c8db_0219a808",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 104,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "style: maybe foundConntrackEntry?",
      "range": {
        "startLine": 104,
        "startChar": 16,
        "endLine": 104,
        "endChar": 31
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4809e772_7bd383b6",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 114,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "nit: period?",
      "range": {
        "startLine": 114,
        "startChar": 47,
        "endLine": 114,
        "endChar": 48
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "446116b9_6f90ed9a",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 118,
      "author": {
        "id": 1203633
      },
      "writtenOn": "2020-09-25T22:41:46Z",
      "side": 1,
      "message": "In the future ConntrackMessage should get a parse API like StructNlMsgHdr so we can confirm that the conntrack added is for the TCP connection above, but this should be fine for now.",
      "range": {
        "startLine": 115,
        "startChar": 12,
        "endLine": 118,
        "endChar": 13
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "224892e1_79c63177",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 118,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "Maybe add a // TODO: for it?",
      "parentUuid": "446116b9_6f90ed9a",
      "range": {
        "startLine": 115,
        "startChar": 12,
        "endLine": 118,
        "endChar": 13
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74d2398b_f12f65f7",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 118,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-09-26T06:13:07Z",
      "side": 1,
      "message": "+1, having a TODO here will be helpful.",
      "parentUuid": "224892e1_79c63177",
      "range": {
        "startLine": 115,
        "startChar": 12,
        "endLine": 118,
        "endChar": 13
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69e5e40d_6f6e1042",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 121,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2020-09-26T04:38:31Z",
      "side": 1,
      "message": "Will these sockets be closed if fail at l.111?\nIf not, maybe you want to use finally?",
      "range": {
        "startLine": 120,
        "startChar": 8,
        "endLine": 121,
        "endChar": 29
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a264fef_cc06ec3a",
        "filename": "packages/Tethering/tests/privileged/src/com/android/networkstack/tethering/OffloadHardwareInterfaceTest.java",
        "patchSetId": 10
      },
      "lineNbr": 121,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-09-26T06:13:07Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "69e5e40d_6f6e1042",
      "range": {
        "startLine": 120,
        "startChar": 8,
        "endLine": 121,
        "endChar": 29
      },
      "revId": "790f9d672c9678f5c28352574e5582a7c0d58d1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}