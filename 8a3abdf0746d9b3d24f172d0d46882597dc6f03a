{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9348a646_3275ea68",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1309980
      },
      "writtenOn": "2023-02-16T09:28:42Z",
      "side": 1,
      "message": "Thank you for Hans\u0027 review.",
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "786d488c_7c14a12c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1064003
      },
      "writtenOn": "2023-02-16T19:28:45Z",
      "side": 1,
      "message": "What is the expected memory and/or app startup latency impact for this change? Have you run any measurements?",
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9606df8e_7dfdf443",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1047255
      },
      "writtenOn": "2023-02-16T19:37:07Z",
      "side": 1,
      "message": "The changes to ZygoteInit.java shouldn\u0027t impact app startup latency as it just moves where the code is located, not where or when it is called in the Zygote.\n\nThe resetPreloadDrawableStateCache() only impacts the local process, not the Zygote or any other processes on the System.  This will cause some of that process\u0027s shared memory pages to be marked dirty, which in turn will cause the Zygote\u0027s PSS to _increase_ but the _rss_ value will stay the same.\n\nAny increase in physical memory usage should only occur in the process that resets the preload drawable state cache.",
      "parentUuid": "786d488c_7c14a12c",
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "135d889b_17799f48",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1064003
      },
      "writtenOn": "2023-02-16T19:51:15Z",
      "side": 1,
      "message": "\u003e Any increase in physical memory usage should only occur in the process that resets the preload drawable state cache.\n\nI see, makes perfect sense. And that reset is just happening for a few resource-specific perf tests?",
      "parentUuid": "9606df8e_7dfdf443",
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e45b3ffc_471f0ba4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1047255
      },
      "writtenOn": "2023-02-16T19:52:51Z",
      "side": 1,
      "message": "That is my understanding, yes, but I\u0027ll let Felka provide the definitive answer.",
      "parentUuid": "135d889b_17799f48",
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "72e4f05f_919c71d5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1309980
      },
      "writtenOn": "2023-02-24T02:03:58Z",
      "side": 1,
      "message": "hello @zyy@google.com\n\nThis patch moves the tasks of preloading the drawables as state cache from ZygoteInit.java to Resources.java.\n\nThank you very much for your review.",
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce44d3e7_d072e2ea",
        "filename": "core/java/android/content/res/Resources.java",
        "patchSetId": 3
      },
      "lineNbr": 2689,
      "author": {
        "id": 1042828
      },
      "writtenOn": "2023-02-16T18:31:20Z",
      "side": 1,
      "message": "Aside for discussion with Chris, NOT for this CL:\n\nI can\u0027t imagine this is a good idea. This is normally called during zygote startup, right? So we put a zygote allocated object on a list so that it can be used later by a child, dirtying zygote space?\n\nThis is probably ancient code. We should probably also look for other instances of this kind of stuff.",
      "range": {
        "startLine": 2689,
        "startChar": 16,
        "endLine": 2689,
        "endChar": 29
      },
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6f9b7ef5_63770d7c",
        "filename": "core/java/android/content/res/Resources.java",
        "patchSetId": 3
      },
      "lineNbr": 2689,
      "author": {
        "id": 1047255
      },
      "writtenOn": "2023-02-16T18:40:14Z",
      "side": 1,
      "message": "Sounds good to me.",
      "parentUuid": "ce44d3e7_d072e2ea",
      "range": {
        "startLine": 2689,
        "startChar": 16,
        "endLine": 2689,
        "endChar": 29
      },
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "983ebd20_35fec62b",
        "filename": "core/java/android/content/res/Resources.java",
        "patchSetId": 3
      },
      "lineNbr": 2689,
      "author": {
        "id": 1080076
      },
      "writtenOn": "2023-02-27T04:50:34Z",
      "side": 1,
      "message": "given that this whole preloading calls into some low level resource loading code, I suspect there are kilobytes and kilobytes of heap, both managed and native, dirtied one way or another",
      "parentUuid": "6f9b7ef5_63770d7c",
      "range": {
        "startLine": 2689,
        "startChar": 16,
        "endLine": 2689,
        "endChar": 29
      },
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59d48e47_84d3ca6d",
        "filename": "core/java/android/content/res/ResourcesImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 164,
      "author": {
        "id": 1080076
      },
      "writtenOn": "2023-02-27T04:50:34Z",
      "side": 1,
      "message": "mark with @VisibleForTesting to make it clear it\u0027s not for anything else? Also worth pointing out that it\u0027s not thread safe and definitely can\u0027t be used anywhere but in a single global test initialization function",
      "range": {
        "startLine": 164,
        "startChar": 0,
        "endLine": 164,
        "endChar": 43
      },
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6495f515_6c5fbcd2",
        "filename": "core/java/android/content/res/ResourcesImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 164,
      "author": {
        "id": 1309980
      },
      "writtenOn": "2023-03-03T05:09:58Z",
      "side": 1,
      "message": "Done by adding the @VisibleForTesting and comments in pathset 6.",
      "parentUuid": "59d48e47_84d3ca6d",
      "range": {
        "startLine": 164,
        "startChar": 0,
        "endLine": 164,
        "endChar": 43
      },
      "revId": "8a3abdf0746d9b3d24f172d0d46882597dc6f03a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}