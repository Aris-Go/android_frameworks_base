{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2ce6972f_2baf6a1a",
        "filename": "core/java/android/view/InsetsAnimationThreadControlRunner.java",
        "patchSetId": 2
      },
      "lineNbr": 126,
      "author": {
        "id": 1348425
      },
      "writtenOn": "2024-10-16T08:52:53Z",
      "side": 1,
      "message": "`setInsetsAndAlpha` can still be called from ValueAnimator [here](https://cs.android.com/android/platform/superproject/main/+/main:frameworks/base/core/java/android/view/InsetsController.java;l\u003d431;drc\u003da000bf9338fb69d7cd841c843f57f5b2ae7df68c) where might not be protected by `sLock`. So I am wondering if this fixes all the cases.",
      "revId": "7af5ce0c41b4b8f45aec3a196b97297694ef95b2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16771b1d_de9a2c71",
        "filename": "core/java/android/view/InsetsAnimationThreadControlRunner.java",
        "patchSetId": 2
      },
      "lineNbr": 126,
      "author": {
        "id": 1700909
      },
      "writtenOn": "2024-10-17T09:24:45Z",
      "side": 1,
      "message": "The fix here only addresses the issue with the \"InsetsAnimations\" process related to InsetsAnimationThread.getHandler. If you are not using InsetsAnimationThread.getHandler, you will not experience this issue because they are likely running on the same thread. At least for now, no issues have been identified outside of the InsetsAnimationThreadControlRunner class.\n\nTherefore, when this problem occurs in other processes, other customized repair solutions need to be based on specific error stacks.\n\n\nOther recurring stacksï¼Œ as well as the \u0027InsetsAnimations\u0027 process.\n```\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime: *** FATAL EXCEPTION IN SYSTEM PROCESS: InsetsAnimations\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime: java.lang.IllegalStateException: Can\u0027t change insets on an animation that is cancelled.\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.view.InsetsAnimationControlImpl.setInsetsAndAlpha(InsetsAnimationControlImpl.java:264)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.view.InsetsAnimationControlImpl.setInsetsAndAlpha(InsetsAnimationControlImpl.java:254)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.view.InsetsController$InternalAnimationControlListener.lambda$onReady$0(InsetsController.java:473)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.view.InsetsController$InternalAnimationControlListener.$r8$lambda$BJTEi7zfHhP2W08t256nzVrDzao(Unknown Source:0)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.view.InsetsController$InternalAnimationControlListener$$ExternalSyntheticLambda0.onAnimationUpdate(D8$$SyntheticClass:0)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.animation.Animator$AnimatorCaller.lambda$static$4(Animator.java:855)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.animation.Animator$AnimatorCaller$$ExternalSyntheticLambda6.call(D8$$SyntheticClass:0)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.animation.Animator.callOnList(Animator.java:666)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.animation.ValueAnimator.animateValue(ValueAnimator.java:1645)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.animation.ValueAnimator.setCurrentFraction(ValueAnimator.java:771)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.animation.ValueAnimator.setCurrentPlayTime(ValueAnimator.java:734)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.animation.ValueAnimator.start(ValueAnimator.java:1154)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.animation.ValueAnimator.start(ValueAnimator.java:1173)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.view.InsetsController$InternalAnimationControlListener.onReady(InsetsController.java:503)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.view.InsetsAnimationThreadControlRunner.lambda$new$0(InsetsAnimationThreadControlRunner.java:129)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.view.InsetsAnimationThreadControlRunner.$r8$lambda$DLuG7Ht_vy5T5uYr29Rzhu2CZeY(Unknown Source:0)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.view.InsetsAnimationThreadControlRunner$$ExternalSyntheticLambda2.run(D8$$SyntheticClass:0)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.os.Handler.handleCallback(Handler.java:959)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.os.Handler.dispatchMessage(Handler.java:100)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.os.Looper.loopOnce(Looper.java:249)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.os.Looper.loop(Looper.java:337)\n08-25 08:54:36.835  1000  2738  7320 E AndroidRuntime:     at android.os.HandlerThread.run(HandlerThread.java:85) \n```",
      "parentUuid": "2ce6972f_2baf6a1a",
      "revId": "7af5ce0c41b4b8f45aec3a196b97297694ef95b2",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}