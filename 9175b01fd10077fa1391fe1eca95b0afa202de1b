{
  "comments": [
    {
      "key": {
        "uuid": "081d11a1_41101391",
        "filename": "core/java/android/net/ConnectivityDiagnosticsManager.java",
        "patchSetId": 19
      },
      "lineNbr": 481,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-01-16T17:31:01Z",
      "side": 1,
      "message": "Let\u0027s not limit it to that because when we add such a category we may forget to update this list, and even if we don\u0027t old documentation will stay on the net forever. So I prefer to be a little bit more vague and insinuate the list may or may not be exhaustive ; the criterion above is what is authoritative.",
      "range": {
        "startLine": 480,
        "startChar": 78,
        "endLine": 481,
        "endChar": 33
      },
      "revId": "9175b01fd10077fa1391fe1eca95b0afa202de1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "295aec4f_1132fc31",
        "filename": "core/java/android/net/ConnectivityDiagnosticsManager.java",
        "patchSetId": 19
      },
      "lineNbr": 481,
      "author": {
        "id": 1463964
      },
      "writtenOn": "2020-01-17T23:44:18Z",
      "side": 1,
      "message": "Rephrased to clarify that this list is not a guarantee. Thoughts?",
      "parentUuid": "081d11a1_41101391",
      "range": {
        "startLine": 480,
        "startChar": 78,
        "endLine": 481,
        "endChar": 33
      },
      "revId": "9175b01fd10077fa1391fe1eca95b0afa202de1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6dc0694_656512af",
        "filename": "core/java/android/net/ConnectivityDiagnosticsManager.java",
        "patchSetId": 19
      },
      "lineNbr": 481,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-01-18T08:29:04Z",
      "side": 1,
      "message": "I like the new wording, thanks.",
      "parentUuid": "295aec4f_1132fc31",
      "range": {
        "startLine": 480,
        "startChar": 78,
        "endLine": 481,
        "endChar": 33
      },
      "revId": "9175b01fd10077fa1391fe1eca95b0afa202de1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f2647ee2_6d117f1f",
        "filename": "core/java/android/net/ConnectivityDiagnosticsManager.java",
        "patchSetId": 19
      },
      "lineNbr": 481,
      "author": {
        "id": 1463964
      },
      "writtenOn": "2020-01-21T01:07:12Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d6dc0694_656512af",
      "range": {
        "startLine": 480,
        "startChar": 78,
        "endLine": 481,
        "endChar": 33
      },
      "revId": "9175b01fd10077fa1391fe1eca95b0afa202de1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f9b3ac91_3242096b",
        "filename": "core/java/android/net/ConnectivityDiagnosticsManager.java",
        "patchSetId": 19
      },
      "lineNbr": 489,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-01-16T17:31:01Z",
      "side": 1,
      "message": "Won\u0027t we throw in their face if they try to register without those permissions ? I do see the consistency problem with the case where an app stops satisfying the requirements, but I think it\u0027s easier to understand for developers than to let them register and never do anything for them, and that\u0027s probably more important in this case.\nI guess you can add that any app that stops satisfying the requirements after it registered will stop seeing the callbacks.",
      "range": {
        "startLine": 489,
        "startChar": 89,
        "endLine": 489,
        "endChar": 90
      },
      "revId": "9175b01fd10077fa1391fe1eca95b0afa202de1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec076d78_57a2469e",
        "filename": "core/java/android/net/ConnectivityDiagnosticsManager.java",
        "patchSetId": 19
      },
      "lineNbr": 489,
      "author": {
        "id": 1463964
      },
      "writtenOn": "2020-01-17T23:44:18Z",
      "side": 1,
      "message": "It\u0027s not feasible to throw for all permissions checks when registering callbacks. The work to register() is moved onto the ConnectivityService Thread and it\u0027s not possible to throw from there.\n\nThe \"silently stop receiving callbacks\" behavior is described in the next paragraph.",
      "parentUuid": "f9b3ac91_3242096b",
      "range": {
        "startLine": 489,
        "startChar": 89,
        "endLine": 489,
        "endChar": 90
      },
      "revId": "9175b01fd10077fa1391fe1eca95b0afa202de1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ca03c33_0a6d374b",
        "filename": "core/java/android/net/ConnectivityDiagnosticsManager.java",
        "patchSetId": 19
      },
      "lineNbr": 489,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-01-18T08:29:04Z",
      "side": 1,
      "message": "Indeed, and also there is the point that Nathan made in our last meeting where an app may want to register before it has permissions so that it learns about things as soon as it gets them.\n\nI wonder if there is any way to let callers know when they have permissions. Maybe we should have a function onPermissionsChanged on the callback or something.",
      "parentUuid": "ec076d78_57a2469e",
      "range": {
        "startLine": 489,
        "startChar": 89,
        "endLine": 489,
        "endChar": 90
      },
      "revId": "9175b01fd10077fa1391fe1eca95b0afa202de1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af24d495_8c8793e8",
        "filename": "core/java/android/net/ConnectivityDiagnosticsManager.java",
        "patchSetId": 19
      },
      "lineNbr": 489,
      "author": {
        "id": 1463964
      },
      "writtenOn": "2020-01-21T01:07:12Z",
      "side": 1,
      "message": "I think this would be a good feature to add for a future release. It does mean that ConnectivityService needs to start caring about / tracking permissions for all of the registered callbacks, which seems to be a non-trivial amount of work to add.\n\nI suggest considering it for S. Thoughts?",
      "parentUuid": "0ca03c33_0a6d374b",
      "range": {
        "startLine": 489,
        "startChar": 89,
        "endLine": 489,
        "endChar": 90
      },
      "revId": "9175b01fd10077fa1391fe1eca95b0afa202de1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a14520b2_f766263d",
        "filename": "core/java/android/net/ConnectivityDiagnosticsManager.java",
        "patchSetId": 19
      },
      "lineNbr": 489,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-01-21T17:15:29Z",
      "side": 1,
      "message": "I don\u0027t think we need to track per callback ; we\u0027ll need to track per UID anyway and when that changes it\u0027s fairly easy to go through the callbacks to see who gained and who lost permission.\n\nI fear it might be a fairly annoying limitation, but we are out of time to consider such things now, so I don\u0027t think it can make R.",
      "parentUuid": "af24d495_8c8793e8",
      "range": {
        "startLine": 489,
        "startChar": 89,
        "endLine": 489,
        "endChar": 90
      },
      "revId": "9175b01fd10077fa1391fe1eca95b0afa202de1b",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}