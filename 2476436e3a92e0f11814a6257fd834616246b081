{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ace090c4_64324a27",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 42
      },
      "lineNbr": 0,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-12-29T04:37:39Z",
      "side": 1,
      "message": "Almost there. Remaining from me are only 3 important comments and 3 nits.",
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "129715e1_fb562be9",
        "filename": "core/java/android/net/QosSocketInfo.java",
        "patchSetId": 42
      },
      "lineNbr": 118,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-12-29T04:37:39Z",
      "side": 1,
      "message": "go/avoidwe :)",
      "range": {
        "startLine": 118,
        "startChar": 23,
        "endLine": 118,
        "endChar": 25
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0963da58_772507b1",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 42
      },
      "lineNbr": 5579,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-12-29T04:37:39Z",
      "side": 1,
      "message": "I don\u0027t think you need to write this, since mNetworkRequestCounter is only available in CS.",
      "range": {
        "startLine": 5579,
        "startChar": 12,
        "endLine": 5579,
        "endChar": 37
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "67850cd0_91db74f1",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 42
      },
      "lineNbr": 5579,
      "author": {
        "id": 1606087
      },
      "writtenOn": "2020-12-29T21:52:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0963da58_772507b1",
      "range": {
        "startLine": 5579,
        "startChar": 12,
        "endLine": 5579,
        "endChar": 37
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b553a8a8_73fa1d18",
        "filename": "services/core/java/com/android/server/connectivity/QosCallbackTracker.java",
        "patchSetId": 42
      },
      "lineNbr": 69,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-12-29T04:37:39Z",
      "side": 1,
      "message": "Nit : maybe \"last\" ? No strong opinion.",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 25
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f194e869_28334e23",
        "filename": "telephony/java/android/telephony/data/EpsBearerQosSessionAttributes.java",
        "patchSetId": 42
      },
      "lineNbr": 131,
      "author": {
        "id": 1141163
      },
      "writtenOn": "2020-12-23T19:05:57Z",
      "side": 1,
      "message": "nit: can this order be altered i.e first downlink then uplink similar to guaranteed BitRate ?",
      "range": {
        "startLine": 130,
        "startChar": 0,
        "endLine": 131,
        "endChar": 66
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "00cf6400_353d6cfe",
        "filename": "telephony/java/android/telephony/data/EpsBearerQosSessionAttributes.java",
        "patchSetId": 42
      },
      "lineNbr": 131,
      "author": {
        "id": 1606087
      },
      "writtenOn": "2020-12-30T02:35:57Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f194e869_28334e23",
      "range": {
        "startLine": 130,
        "startChar": 0,
        "endLine": 131,
        "endChar": 66
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c51f3e2_42ee0eb9",
        "filename": "tests/net/java/android/net/ConnectivityManagerTest.java",
        "patchSetId": 42
      },
      "lineNbr": 0,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-12-29T04:37:39Z",
      "side": 1,
      "message": "Where did all the finals from patchset 38 go ? Please reinstate them.",
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51715d49_10f8801d",
        "filename": "tests/net/java/android/net/ConnectivityManagerTest.java",
        "patchSetId": 42
      },
      "lineNbr": 0,
      "author": {
        "id": 1606087
      },
      "writtenOn": "2020-12-29T21:52:59Z",
      "side": 1,
      "message": "see:\nhttps://android-review.googlesource.com/c/platform/frameworks/base/+/1386623/comment/545aee4b_eb92efb8/\n\nSince I removed the only test that I had here, marking everything as final didn\u0027t make sense.\n\nFYI, I\u0027m just using an option in intellij \\ Android Studio that both catches and fixes missing \"finals\".  Go to Settings-\u003eEditor-\u003eInspections (right panel) Java-\u003eCode Style Issues-\u003e\"Local variable or parameter can be final\"\n\nHere is the post that I found on it:\nhttps://stackoverflow.com/questions/42345926/massively-refactor-how-to-add-final-keyword-to-java-method-argument",
      "parentUuid": "4c51f3e2_42ee0eb9",
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c649aec_0b492a47",
        "filename": "tests/net/java/android/net/ConnectivityManagerTest.java",
        "patchSetId": 42
      },
      "lineNbr": 0,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2021-01-07T08:25:24Z",
      "side": 1,
      "message": "Ah sorry, I was just looking at the diff from the previous patchset. Makes sense.",
      "parentUuid": "51715d49_10f8801d",
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "545aee4b_eb92efb8",
        "filename": "tests/net/java/android/net/ConnectivityManagerTest.java",
        "patchSetId": 42
      },
      "lineNbr": 334,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-12-29T04:37:39Z",
      "side": 1,
      "message": "Was removing testQosCallbackConnectivityServiceCalled() from PS 38 expected ?",
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eadbcfa7_c389c153",
        "filename": "tests/net/java/android/net/ConnectivityManagerTest.java",
        "patchSetId": 42
      },
      "lineNbr": 334,
      "author": {
        "id": 1606087
      },
      "writtenOn": "2020-12-29T21:52:59Z",
      "side": 1,
      "message": "Yes, it was intentional.  I left a small note in the chat room on why I removed it (I should have also had the same note on the PS as well.)\n\nHere is the reasoning:\nI did this test before the cts tests.  After doing the CTS tests, I realized this was redundant but kept this test in for extra coverage.\n\nIn the latest update, I removed the test code from QosSocketInfo which allowed me to initialize the object with a non-bound socket for the purposes of the test.  I was unable though to mock final classes though and so I decided it\u0027s best to keep the test code out of QosSocketInfo since the cases were already covered.\n\nI did spend a few hours trying to add Mockito 2.0 based off of a bug from some other team in buganizer, but could never get it working.  It also looks like the upgrade is not fully backwards compatible which is obviously not appealing.  I do remember you saying that you mocked final classes in several tests, but I\u0027m not sure if you meant within connectivity tests or just generally in Android tests.  I can confidently say that just adding either mock(...) or @Mock does not work with the Qos classes that are marked final.  If you do have a specific example to point me to then I can add this test back.  (I will ask my teammates for help on this today and so this answer may change.)",
      "parentUuid": "545aee4b_eb92efb8",
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db3f78a0_488e4773",
        "filename": "tests/net/java/android/net/ConnectivityManagerTest.java",
        "patchSetId": 42
      },
      "lineNbr": 334,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2021-01-07T08:25:24Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "eadbcfa7_c389c153",
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1813f9df_e4fc7d10",
        "filename": "tests/net/java/android/net/ConnectivityManagerTest.java",
        "patchSetId": 42
      },
      "lineNbr": 335,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-12-29T04:37:39Z",
      "side": 1,
      "message": "Using a ThrowingRunnable here will be helpful in the future (right now this can only be used with runnables that don\u0027t throw any checked exception).\n\n  private static \u003cT\u003e void mustFail(ThrowingRunnable\u003cT\u003e fn) throws Exception {\n  }",
      "range": {
        "startLine": 335,
        "startChar": 25,
        "endLine": 335,
        "endChar": 33
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d435681_8776040d",
        "filename": "tests/net/java/android/net/ConnectivityManagerTest.java",
        "patchSetId": 42
      },
      "lineNbr": 335,
      "author": {
        "id": 1606087
      },
      "writtenOn": "2020-12-29T21:52:59Z",
      "side": 1,
      "message": "I didn\u0027t add this though?\n\nNot sure if you thought I did add it or you were just letting me know (which, was helpful for the future, so in that case, thanks.)\n\nMarking as resolved assuming that you didn\u0027t want me to change code that I didn\u0027t touch.",
      "parentUuid": "1813f9df_e4fc7d10",
      "range": {
        "startLine": 335,
        "startChar": 25,
        "endLine": 335,
        "endChar": 33
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "741b5240_ddfb2f48",
        "filename": "tests/net/java/android/net/ConnectivityManagerTest.java",
        "patchSetId": 42
      },
      "lineNbr": 335,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2021-01-07T08:25:24Z",
      "side": 1,
      "message": "Somehow Gerrit was marking this as something you had changed. Thanks.",
      "parentUuid": "4d435681_8776040d",
      "range": {
        "startLine": 335,
        "startChar": 25,
        "endLine": 335,
        "endChar": 33
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fed7ea0_ce85abd5",
        "filename": "tests/net/java/com/android/server/ConnectivityServiceTest.java",
        "patchSetId": 42
      },
      "lineNbr": 8175,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-12-29T04:37:39Z",
      "side": 1,
      "message": "You don\u0027t have anything annotated with @Mock in this class. In fact I think the code in PS38 where mFilter was final and initialized to \u003d mock(QosSocketFilter.class) was safer.",
      "range": {
        "startLine": 8175,
        "startChar": 12,
        "endLine": 8175,
        "endChar": 47
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "71b2cc26_40f5c15f",
        "filename": "tests/net/java/com/android/server/ConnectivityServiceTest.java",
        "patchSetId": 42
      },
      "lineNbr": 8175,
      "author": {
        "id": 1606087
      },
      "writtenOn": "2020-12-29T21:52:59Z",
      "side": 1,
      "message": "First, see my reply here:\nhttps://android-review.googlesource.com/c/platform/frameworks/base/+/1386623/comment/545aee4b_eb92efb8/\n\n1. Removed init annotations, it was left over from when I was experimenting mocking final classes.\n2. Making QosSocketFilter final + parcelable allowed me to remove the code within NetworkAgent that kept checking the class type before and after the Message was shipped between boundaries.  The trade off was definitely worth it because I was able to remove several lines of codes that I absolutely loathed.",
      "parentUuid": "2fed7ea0_ce85abd5",
      "range": {
        "startLine": 8175,
        "startChar": 12,
        "endLine": 8175,
        "endChar": 47
      },
      "revId": "2476436e3a92e0f11814a6257fd834616246b081",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}