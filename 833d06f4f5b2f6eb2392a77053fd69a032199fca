{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1ec79bed_99bb6468",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-12-28T07:43:54Z",
      "side": 1,
      "message": "Some questions inline on the semantics. Perhaps this just needs to be documented more clearly?",
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fe842888_228d05eb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-12-28T08:13:57Z",
      "side": 1,
      "message": "-1 because since the semantics aren\u0027t very clear (or at least not clearly documented).",
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "72527142_095488fa",
        "filename": "core/java/android/net/NetworkCapabilities.java",
        "patchSetId": 2
      },
      "lineNbr": 2173,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-12-28T07:43:54Z",
      "side": 1,
      "message": "Given that this field is in NetworkCapabilities, presumably it can be set both on networks and in NetworkRequests, such that every Network, and every NetworkRequest, have either zero or one subscription group. But what does this mean, given that a group is just a list of subIds? Isn\u0027t it the case that a network has zero or one subId, just like it has zero or one subscriberId?\n\nThe docs at:\n\nhttps://developer.android.com/reference/android/telephony/SubscriptionManager#createSubscriptionGroup(java.util.List%3Cjava.lang.Integer%3E)\n\nsays that a subscription group is a group of subIds. It says that subIds can be added and removed from a group. But, what if two subscription groups have some or all subIds in common? For example, consider:\n\n1. Subscription group 1 exists with subIds 1, 3, 5\n2. NetworkRequest A is filed for group 1\n3. Network Z exists with subIds 1, 3, 5. A matches.\n4. Subscription group 2 created with subIds 1, 3, 5.\n\nAt that point, what happens? Should network Z change subscriber group from 1 to 2? Even if it does, will NetworkRequest A no longer match network Z? But why should it no longer match network Z, given that the subIds in the group are the same subIds in the network?",
      "range": {
        "startLine": 2173,
        "startChar": 31,
        "endLine": 2173,
        "endChar": 53
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66b7c4ea_5f21e648",
        "filename": "core/java/android/net/NetworkCapabilities.java",
        "patchSetId": 2
      },
      "lineNbr": 2173,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2021-01-05T08:05:08Z",
      "side": 1,
      "message": "Thanks for pointing out.\nI believe this would be a legit use case when user clear fi user data as https://source.corp.google.com/piper///depot/google3/java/com/google/android/apps/tycho/telephony/common/SubscriptionUtil.java;l\u003d480?q\u003dcreateGroupUsingSubscriptionManager said.\nWhen this happens, NetworkRequest A will no longer match network Z. And IIUC there is nothing we could do in CS, given that the UUID is different, it is not good for CS to query for the group lists of two UUIDs and compare them.\nBut I\u0027m lack of context of how VCN/telephony would handle this case in general.\n\n+Ben to input.",
      "parentUuid": "72527142_095488fa",
      "range": {
        "startLine": 2173,
        "startChar": 31,
        "endLine": 2173,
        "endChar": 53
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35be1b5e_a710e981",
        "filename": "core/java/android/net/NetworkCapabilities.java",
        "patchSetId": 2
      },
      "lineNbr": 2173,
      "author": {
        "id": 1221725
      },
      "writtenOn": "2021-01-06T18:23:59Z",
      "side": 1,
      "message": "A SubscriptionGroup is a separate object from the subIds, but internally are mapped to a list of subIds (which may change over time). Each subscription group is identified by a ParcelUuid, and we should be able to simply use that to do the matching.\n\nIIRC:\n- A subId can only be in one Subscription Group (needs update of javadoc; no known use case for a single subid to be in multiple subgroup at once.\n- A Network is tied to a single subId (not multiple)\n- Having a requestable SubscriptionGroup is useful, since it allows a requestor to request ANY Network provided by a subId in the group.\n\nSo in the above example, adding 1, 3, and 5 into subGrp2 would remove them from subGrp1 (or fail unless they are first removed from subGrp1), and the NetworkRequest should no longer be satisfied by any of them.",
      "parentUuid": "72527142_095488fa",
      "range": {
        "startLine": 2173,
        "startChar": 31,
        "endLine": 2173,
        "endChar": 53
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9594ecc0_deea805b",
        "filename": "core/java/android/net/NetworkCapabilities.java",
        "patchSetId": 2
      },
      "lineNbr": 2514,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-12-28T07:43:54Z",
      "side": 1,
      "message": "What is a subscription group, and where is it defined? Is it a concept that comes from SubscriptionManager? If so, we should probably have a @link or @see tag here.",
      "range": {
        "startLine": 2514,
        "startChar": 9,
        "endLine": 2514,
        "endChar": 83
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1dffa9ad_5ebaf52d",
        "filename": "core/java/android/net/NetworkCapabilities.java",
        "patchSetId": 2
      },
      "lineNbr": 2514,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2021-01-05T08:05:08Z",
      "side": 1,
      "message": "Done.\nLinked to SubscriptionManager#createSubscriptionGroup.\nSee if it works for you.",
      "parentUuid": "9594ecc0_deea805b",
      "range": {
        "startLine": 2514,
        "startChar": 9,
        "endLine": 2514,
        "endChar": 83
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36627abd_a74b3274",
        "filename": "core/java/android/net/NetworkRequest.java",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-12-28T07:43:54Z",
      "side": 1,
      "message": "I find this confusing. Aren\u0027t NetworkRequest objects always used to register callbacks? Or is there some subtlety here that should be explained in more detail?",
      "range": {
        "startLine": 376,
        "startChar": 11,
        "endLine": 376,
        "endChar": 43
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20137455_c7f1180c",
        "filename": "core/java/android/net/NetworkRequest.java",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2020-12-28T07:43:54Z",
      "side": 1,
      "message": "This is true of everything in a NetworkRequest, right? Everything in a NetworkRequest places requirements on Networks?",
      "range": {
        "startLine": 376,
        "startChar": 45,
        "endLine": 376,
        "endChar": 85
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "36c9d6b0_1f5f6036",
        "filename": "core/java/android/net/NetworkRequest.java",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2021-01-05T08:05:08Z",
      "side": 1,
      "message": "Nah, nothing special.\nRevised.\nSee if it is more clear now.",
      "parentUuid": "36627abd_a74b3274",
      "range": {
        "startLine": 376,
        "startChar": 11,
        "endLine": 376,
        "endChar": 43
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a467cd27_4f65c356",
        "filename": "core/java/android/net/NetworkRequest.java",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2021-01-05T08:05:08Z",
      "side": 1,
      "message": "Revised",
      "parentUuid": "20137455_c7f1180c",
      "range": {
        "startLine": 376,
        "startChar": 45,
        "endLine": 376,
        "endChar": 85
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23ad33d7_9fbfb72c",
        "filename": "tests/net/common/java/android/net/NetworkCapabilitiesTest.java",
        "patchSetId": 2
      },
      "lineNbr": 748,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2020-12-31T06:31:20Z",
      "side": 1,
      "message": "So it seems like even though both of them are having different SubscriptionGroupId but they are still the same NC.\nCan you add a comment to explain why? Because SubscriptionGroupId is an optional item?",
      "range": {
        "startLine": 746,
        "startChar": 12,
        "endLine": 748,
        "endChar": 35
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d0a92f00_b6365eba",
        "filename": "tests/net/common/java/android/net/NetworkCapabilitiesTest.java",
        "patchSetId": 2
      },
      "lineNbr": 748,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2021-01-05T08:05:08Z",
      "side": 1,
      "message": "Nah, that means the content of nc2 is replaced by nc1. \nSo they are equal.\nI think it is straightforward.\nReopen if you think a comment is still needed.",
      "parentUuid": "23ad33d7_9fbfb72c",
      "range": {
        "startLine": 746,
        "startChar": 12,
        "endLine": 748,
        "endChar": 35
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f79ec66_3b06c695",
        "filename": "tests/net/common/java/android/net/NetworkCapabilitiesTest.java",
        "patchSetId": 2
      },
      "lineNbr": 748,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2021-01-05T08:15:56Z",
      "side": 1,
      "message": "I guess I didn\u0027t see nc2.set(nc1) last time... 😕",
      "parentUuid": "d0a92f00_b6365eba",
      "range": {
        "startLine": 746,
        "startChar": 12,
        "endLine": 748,
        "endChar": 35
      },
      "revId": "833d06f4f5b2f6eb2392a77053fd69a032199fca",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}