{
  "comments": [
    {
      "key": {
        "uuid": "6272c2b0_13cf28b2",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 7
      },
      "lineNbr": 3961,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2019-11-15T13:37:47Z",
      "side": 1,
      "message": "Why move this code? It looks like we\u0027re trying to ensure that mPermissionMonitor starts before mMultipathPolicyTracker starts. But... doesn\u0027t the current code already do that? systemReady() is guaranteed to run before EVENT_SYSTEM_READY is processed, because systemReady() *is* the code that sends EVENT_SYSTEM_READY.\n\nAm I missing something?",
      "range": {
        "startLine": 3957,
        "startChar": 0,
        "endLine": 3961,
        "endChar": 57
      },
      "revId": "330780128930363dfb0d51b7eced7651a17d6579",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5af9d016_91d8a350",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 7
      },
      "lineNbr": 3961,
      "author": {
        "id": 1308473
      },
      "writtenOn": "2019-11-18T11:35:10Z",
      "side": 1,
      "message": "Yes, EVENT_SYSTEM_READY is sent by systemReady() but it\u0027s before mPermissionMonitor.startMonitoring(). Besides, EVENT_SYSTEM_READY is handled by InternalHandler that mMultipathPolicyTracker.start() may run in parall to cause the race condition. So I think moving mMultipathPolicyTracker.start() into EVENT_SYSTEM_READY is the way to ensure that mPermissionMonitor starts before mMultipathPolicyTracker starts.",
      "parentUuid": "6272c2b0_13cf28b2",
      "range": {
        "startLine": 3957,
        "startChar": 0,
        "endLine": 3961,
        "endChar": 57
      },
      "revId": "330780128930363dfb0d51b7eced7651a17d6579",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2e676e8_dad1f9c2",
        "filename": "tests/net/java/com/android/server/ConnectivityServiceTest.java",
        "patchSetId": 7
      },
      "lineNbr": 6093,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2019-11-15T13:37:47Z",
      "side": 1,
      "message": "Remove NETWORK_STACK, since apps don\u0027t have it.",
      "range": {
        "startLine": 6093,
        "startChar": 20,
        "endLine": 6093,
        "endChar": 57
      },
      "revId": "330780128930363dfb0d51b7eced7651a17d6579",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3373d0a_3a52ad9d",
        "filename": "tests/net/java/com/android/server/ConnectivityServiceTest.java",
        "patchSetId": 7
      },
      "lineNbr": 6093,
      "author": {
        "id": 1308473
      },
      "writtenOn": "2019-11-18T11:35:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f2e676e8_dad1f9c2",
      "range": {
        "startLine": 6093,
        "startChar": 20,
        "endLine": 6093,
        "endChar": 57
      },
      "revId": "330780128930363dfb0d51b7eced7651a17d6579",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}