{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "301bbb3a_4b097b50",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 936,
      "author": {
        "id": 1308473
      },
      "writtenOn": "2020-10-20T08:11:51Z",
      "side": 1,
      "message": "As we talked offline, these two methods may have different check result if the checking service is a native service but not in system service list. Fortunately, ETHERNET_SERVICE is in system service list, so it\u0027s probably fine.\nSince you are not using a static method to check the service, I think you can remove hasService() from Dependencies and check the service inline. It can also prevent the misusing of hasService() in the future that someone calls it to check native service but gets unexpected result. You can change it by follow up commit.",
      "range": {
        "startLine": 936,
        "startChar": 19,
        "endLine": 936,
        "endChar": 58
      },
      "revId": "078136d1a1354387811b58ca180b88d6712ed59a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a18ab4dd_659184fe",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 936,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2020-10-21T01:57:28Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "301bbb3a_4b097b50",
      "range": {
        "startLine": 936,
        "startChar": 19,
        "endLine": 936,
        "endChar": 58
      },
      "revId": "078136d1a1354387811b58ca180b88d6712ed59a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc89cd17_4ef8f9d7",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 936,
      "author": {
        "id": 1288034
      },
      "writtenOn": "2020-10-21T03:08:20Z",
      "side": 1,
      "message": "+1 to that: I\u0027d recommend either calling getSystemService directly at the unique call site, or rename the method to \"hasEthernetService\" and remove the \"name\" argument (small preference for the first option).\n\nAlso, looking at SystemServiceRegistry this may Log.wtf if ConnectivityService is the first one querying EthernetService (see onServiceNotFound). Looking at usages of sEnableServiceNotFoundWtf in that class, it looks like the Log.wtf should be suppressed if that var is false though; maybe have another CL to send to the framework team to fix that ?",
      "parentUuid": "a18ab4dd_659184fe",
      "range": {
        "startLine": 936,
        "startChar": 19,
        "endLine": 936,
        "endChar": 58
      },
      "revId": "078136d1a1354387811b58ca180b88d6712ed59a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb770e78_2c4c3745",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 936,
      "author": {
        "id": 1308163
      },
      "writtenOn": "2020-10-22T10:55:43Z",
      "side": 1,
      "message": "\u003e Also, looking at SystemServiceRegistry this may Log.wtf if ConnectivityService is the first one querying EthernetService (see onServiceNotFound). Looking at usages of sEnableServiceNotFoundWtf in that class, it looks like the Log.wtf should be suppressed if that var is false though; maybe have another CL to send to the framework team to fix that ?\n\nI think the Log.wtf in onServiceNotFound() is only printed when EthernetService is not found, right?\nSo in normal case, the Log.wtf is only printed when the device doesn\u0027t support both of FEATURE_ETHERNET and FEATURE_USB_HOST(Refer to SystemServer.java).\n\nBack to the sEnableServiceNotFoundWtf, I think you\u0027re right that this var is used to suppress the wtf log, but according to the comment in onServiceNotFound(), maybe it\u0027s working as intended that the sEnableServiceNotFoundWtf is not used in onServiceNotFound()?\nI\u0027ll confirm this with Makoto.",
      "parentUuid": "cc89cd17_4ef8f9d7",
      "range": {
        "startLine": 936,
        "startChar": 19,
        "endLine": 936,
        "endChar": 58
      },
      "revId": "078136d1a1354387811b58ca180b88d6712ed59a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}