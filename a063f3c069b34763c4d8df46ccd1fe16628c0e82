{
  "comments": [
    {
      "key": {
        "uuid": "0dda549a_cdbc9662",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 27
      },
      "lineNbr": 1656,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-02-14T00:00:05Z",
      "side": 1,
      "message": "I\u0027m sorry I gave you the comment on the wrong method but... this is going to crash, or at least return a different result than before. getNetworkCapabilitiesInternal can definitely return null. I only meant remove the null check in front of maybeSanitize because now maybeSanitize was handling null gracefully.\n\nYou had :\n\n  NetworkCapabilities maybeSanitize(@NonNull NetworkCapabilities nc) { ... }\n  ...\n  return nc \u003d\u003d null ? null: maybeSanitize(nc);\n  ...\n  nc2 \u003d nc \u003d\u003d null ? null : maybeSanitize(nc);\n  ...\n  netcap2 \u003d netcap \u003d\u003d null ? null : maybeSanitize(netcap);\n\nI wanted to avoid code duplication by saying just :\n\n  NetworkCapabilities maybeSanitize(@Nullable NetworkCapabilities nc) { if (nc \u003d\u003d null) return null; ... }\n  ...\n  return maybeSanitize(nc);\n  ...\n  nc2 \u003d maybeSanitize(nc);\n  ...\n  netcap2 \u003d maybeSanitize(netcap);\n\nI didn\u0027t want to you change networkCapabilitiesRestrictedForCallerPermissions.",
      "range": {
        "startLine": 1656,
        "startChar": 16,
        "endLine": 1656,
        "endChar": 46
      },
      "revId": "a063f3c069b34763c4d8df46ccd1fe16628c0e82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1a5ca91_a29cb354",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 27
      },
      "lineNbr": 1656,
      "author": {
        "id": 1167034
      },
      "writtenOn": "2020-02-14T00:21:10Z",
      "side": 1,
      "message": "I\u0027m not sure whether I understand correctly or not. But currently, in the latest version, I only did the null checking in maybeSanitize and remove all the null checking before that function. (It should be the same as the 2nd example you given.)\n\nIn my previous patch (Patchset 25), I add the null checking in networkCapabilitiesRestrictedForCallerPermissions which I think it\u0027s not necessary. So I revert that change in my latest patchset.",
      "parentUuid": "0dda549a_cdbc9662",
      "range": {
        "startLine": 1656,
        "startChar": 16,
        "endLine": 1656,
        "endChar": 46
      },
      "revId": "a063f3c069b34763c4d8df46ccd1fe16628c0e82",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}