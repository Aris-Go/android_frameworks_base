{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7ab1b784_e2f8bcfe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1065394
      },
      "writtenOn": "2022-06-24T05:32:53Z",
      "side": 1,
      "message": "Sorry, didn\u0027t notice that it is missing in the list, just checked the answer to the comment. And that was still showing Patchset 16.\n\nApproved, thank you!\nMihai\n",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "41dca2b5_fe91a516",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-24T05:50:16Z",
      "side": 1,
      "message": "Moving on to the Code Review phase! Hoping to hear from you soon!",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f9eab834_ce4bb1cb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-24T06:34:08Z",
      "side": 1,
      "message": "Still waiting for your code reviews. We\u0027re making sure that we find the right reviewers to fix this important bug to ensure all system languages are displayed as expected for the Google TV UI and the captions language.",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "80f96d20_0ccc86c4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-24T18:27:56Z",
      "side": 1,
      "message": "Please review this code ASAP. This is a critical bug that needs to be fixed, especially when the Chromecast with Google TV is about to be released in India.",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "12e20c65_1f74d98b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-24T18:41:16Z",
      "side": 1,
      "message": "We\u0027re trying to find the right code owners to complete the Code Owners and Code Review steps in the Submit Requirements section.",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99df4ce9_75aec9c3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-24T22:12:07Z",
      "side": 1,
      "message": "Can you please take a look once more at the code additions needed to re-add the missing languages back in the Settings Menu? Your prompt response would be greatly appreciated.",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f68a1f3b_84965e9a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-27T00:33:04Z",
      "side": 1,
      "message": "Hi Anton,\n\nCan you help suggest some code owners that can help me review my proposed changes to the core/res/res folders in platform/frameworks/base?\n\nTLDR: Renaming language+country resources to just language was the wrong thing to do (see the unexpected change from January 2017 at https://android.googlesource.com/platform/frameworks/base/+/b84a505b62d3d8d52f272e64a1a7f998aa69b8a7), which removed more than 30 languages from the Android UI language settings and the caption language settings and impacted many AOSP devices (including Google\u0027s own Nexus/ Pixel devices) running Android 8.0 and up. To fix this problem, we decided to add back the language+country resources alongside the original language resources and add the donottranslate-maps.xml file in each of the language+country folders that should not have been removed in the first place.\n\nOVERVIEW\nRoozbeh Pournader, an expert on Unicode text encoding, made this change on 1/10/2017, to simplify the localization resources. It\u0027s because nearly every aspect of Android uses the new locale picker (select language, then country/region). However, not all language elements use the new locale picker. This includes the Android TV UI language and the captions language on AOSP devices.\n\nPROVING THAT IT IS WIDESPREAD\nTo be honest with you, we would have started working on this patch as soon as we discovered this bug, in case Google releases a successor to the Nexus Player. However, the latter didn\u0027t happen until 2020, when Google released the Chromecast with Google TV (which we call the Chromecast 4).\n\nHere are the devices that have this localization bug, just to name a few.\n\n* Android Emulators having an API level of 26 or later (does not apply to Automotive Emulators)\n* Any Nexus/Pixel device sold in 2015 and later\n* Chromecast 4\n* Nexus Player\n* Xiaomi Mi Box 3 and Mi Box S\n* TiVo Stream 4K\n\nROOT CAUSE\nAfter a thorough inspection of the folder core/res/res/ in platform/frameworks/base/, this is what we found.\n1. The classic locale picker that was first introduced since the beginning of Android reads from the framework-res.apk to check for any locale resources.\n2. A locale is only valid if it is in the following formats: values-\u003clanguage\u003e-r\u003cREGION\u003e or values-b+\u003clanguage\u003e+\u003cScript\u003e+\u003cREGION\u003e\n3. If a folder shows a language, but not its country, it will not show the language in the list. Additionally, for the new locale picker in Android 7.0 and later, it will not show the region in the Suggested header, but instead in the All Regions header.\n\nPROPOSED FIX\nHere\u0027s what we did so far. We wanted to revert some changes made from the defective commit back to 2017, but we had to change course when Mihai told me that \"probably the best fix is not to move the strings.xml file to a folder with lang + region, but to ADD donottranslate-maps.xml to such a folder (and leave strings.xml in the lang folder, no region).\" We undid the folder revisions and added separate folders with language and region, each containing a file donottranslate-maps.xml depending on the country. The location data is provided by Google\u0027s Dataset Publishing Language at https://developers.google.com/public-data/docs/canonical/countries_csv, where we can see the geocoordinates for each country. We multiplied each of the latitude and longitude values by 1 million, since every existing donottranslate-maps.xml file uses integers as coordinates. For the zoom factor, I couldn\u0027t find a good number, so I left it at 4 for most countries (usually ranges from 2 to 7). The larger the country, the smaller the zoom factor should be.\n\nCURRENT IMPACT\nEven a single wrong move can negatively impact the localization framework. India is a developing country with 22 different languages, but only 14 of them are supported by Android phones and tablets (2 by Android TVs and the Chromecast 4). What if someone is deaf and their native language is one other than English or Hindi? This is the real reason why this is a critical bug fix in terms of accessibility services. In fact, there are approximately 63 million people who are suffering from Significant Auditory Impairment, which places the estimated prevalence at 6.3% in Indian population. We don\u0027t want these people continue to suffer!\n\nGOOGLE TV AROUND THE WORLD\nIn June 2022, according to https://www.flatpanelshd.com/news.php?subaction\u003dshowfull\u0026id\u003d1654071481, Google announced that for the European market, the new Chromecast 4 will be coming to the Netherlands, Belgium, Denmark, Norway, Sweden, Finland, Switzerland, and Austria. For the Asia Pacific market, it will be coming to Taiwan, New Zealand, South Korea, and India.\n\nFor the first 11 countries, the current setup allows for the following new languages to be released (most are already present in the Android TV 12 Emulators):\n\nEUROPE\n* Netherlands: Dutch\n* Belgium: French, Dutch\n* Denmark: Danish\n* Norway: Norwegian Bokm√•l\n* Sweden: Swedish\n* Finland: Finnish\n* Switzerland: German, French, Italian\n* Austria: German\n\nAPAC\n* Taiwan: Chinese (Traditional)\n* New Zealand: English (not in the ATV AVD)\n* South Korea: Korean\n* India: English, Hindi\n\nAccording to the article above, the Chromecast 4 \"was already sold by third-party retailers in these regions and all existing units will also get updated to support the new localized features,\" and that \"users will get an interface in their local language and deeper integration with local services.\" But when it comes to the last country (India), we immediately stopped right there. As I have mentioned earlier, India has so many different languages, such as English, Urdu, Nepali, Marathi, Hindi, Assamese, Bangla, Punjabi, Gujarati, Odia, Tamil, Telugu, Kannada, and Malayalam. Without this important bug fix, only English and Hindi will be supported as local languages for the Google TV UI and the captions.\n\nOnce again, I am in need of some code owners to review my proposed additions to the code. Can you suggest some for me?\n\nThis is something that needs to be addressed urgently. Your prompt response would be greatly appreciated. We cannot put this one off the list.\n\nKelvin",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dbfb7283_ff98bdc5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-27T00:44:39Z",
      "side": 1,
      "message": "I accidentally marked the above as Resolved when in fact it wasn\u0027t. Sorry about that!",
      "parentUuid": "f68a1f3b_84965e9a",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ee04d58_481aa709",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-27T22:46:15Z",
      "side": 1,
      "message": "Amith and Patrick, can you please a look at the proposed additions to the code, so that we can fix the language bug present in Android TV devices as well as the caption language on all devices? If you don\u0027t, then it is going to cause problems for Chromecast users in India. We don\u0027t want Indian customers be limited to English and Hindi for the language settings!\n(All we wanted is to find the right code owners that can help review my proposed changes and get them approved as soon as possible.)\n\nWe are still missing the following code votes:\n* Code Review: At least one +2 vote\n* Code Owners: Have at least one code owner enter a +2 vote\n* Presubmit Verified: Still waiting for the Treehugger Robot...",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8597cd57_88e12b10",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-28T21:15:43Z",
      "side": 1,
      "message": "Hi all,\n\nThis crucial change still requires the following votes:\n* Code Review: At least one +2 vote\n* Code Owners: At least one +2 vote from Code Review, from the code owners themselves\n* Presubmit Verified: Still waiting after the above two steps are completed...\n\n(Please don\u0027t remove yourself from the reviewer set. When you are the code owner and remove yourself from the reviewer set, this could hamper our submission progress. You might that I\u0027m crazy, but this change is to help the world have more access to products in their native languages.)\n\nFACTS TO KNOW\n* As of 2017, English is spoken by only a quarter of the population in India. There are 22 other languages recognized as official and are spoken by a larger part of the population.\n* An Indian user who doesn\u0027t speak English won\u0027t have access to all the English written knowledge online and to any products that any company develops in that particular language, not just Google.\n\nWith that being said, if you don\u0027t hurry up and approve this milestone change, then this could make Indian users that don\u0027t speak English or Hindi unable to watch TV in their native language on their Chromecast devices.\n\nKindly review this change as soon as possible.",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b277fbd0_9a60e507",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-30T18:57:28Z",
      "side": 1,
      "message": "We\u0027re cleaning up old comments from older patchsets, only leaving those from the current patchset.\n\nTo be clear, we are not submitting new community translations; we are just fixing a critical bug that caused some languages to disappear from the UI language settings on Android TVs and the captions language settings on all devices.\n\nOnce again, kindly review this commit as soon as possible. Your prompt response would be greatly appreciated.",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7ae40359_6a91b13d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1065394
      },
      "writtenOn": "2022-06-30T19:06:02Z",
      "side": 1,
      "message": "Hi reviewers,\n\nTLDR: if you have the right to review with +2, please consider doing so.\nI don\u0027t have that right, so I gave my +1.\n\nI am part of the i18n team, but did quite a bit of work in the Android i18n, so I am familiar with this area.\n\nWhy do this (I will try to be short)\n\nAndroid N changed the language picker in Settings and SetupWizard\nI\u0027ll call these \"old picker\" and \"new picker\"\nThe old picker is still used by some types of devices (TV, Chromecast, Auto)\n\nWithout this change:\n- The old picker will not show these locales\n- The old picker will not show the parent locale (the one without a country)\n  So even if we have a Bengali translation, it will not show unless we also have a Bengali+\u003cREGION\u003e folder.\n- The new picker will show ALL regions using Bengali (Bangladesh \u0026 India)\n  But the map data in the region folder is still useful.\n  It contains latitude, longitude, and zoom level for the region.\n  So even devices with new pickers will benefit.\n\nIf an OEM wants to disable some of these locales, they can do that in the `PRODUCT_LOCALES` variable defined in the corresponding vendor / device .mk file\n(default being build/make/target/product/languages_default.mk)\n\n\nThank you very much,\nMihai\n",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9fb244fd_a52dfc66",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-30T19:47:32Z",
      "side": 1,
      "message": "Thank you, Mihai for assisting me! I hope to hear from the code owners soon!\nIn case you forgot, the new picker will still show these locales, but in the All Regions header instead of the Suggested header. For example, Serbian (Latin, Serbia) is shown as the last region in Serbian (Latin), not the first.\n(Correction: Android Automotive uses the new locale picker, not the old one.)",
      "parentUuid": "7ae40359_6a91b13d",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "afcf8d4b_5d16b59e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1065394
      },
      "writtenOn": "2022-06-30T20:09:09Z",
      "side": 1,
      "message": "\u003e the new picker will still show these locales\n\nI think I said that :-)\n\n---\n\n\u003e but in the All Regions header instead of the Suggested header\n \nCorrection: the locales in \"Suggested\" are not based on this list, and not on the `PRODUCT_LOCALES`.\n\nIt is based the reunion of these countries:\n* the country of the SIM radio tower (currently connected)\n* the country of the SIM provider\n* the country of the first locale already in the preference list\n\nThat list of countries generates a list of languages (spoken in all of those countries), and those go in \"Suggested\"\n\nIn the special case of SetupWizard without a SIM (where all of the above signals are missing) the wizard defaults to the first language in the `PRODUCT_LOCALES`\n\nI wrote that code, years ago :-)\n\n---\n\n\u003e Correction: Android Automotive uses the new locale picker, not the old one.\n\nAck. Thanks.",
      "parentUuid": "9fb244fd_a52dfc66",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb38ca33_36acbf80",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-30T20:35:13Z",
      "side": 1,
      "message": "\u003e Correction: the locales in \"Suggested\" are not based on this list, and not on the  PRODUCT_LOCALES list.\n\nTLDR: Locales from PRODUCT_LOCALES appear in the Suggested header if and only if a corresponding values-\u003clanguage\u003e-r\u003cREGION\u003e/ folder exists for each particular locale.\n\nHere are our findings on the new locale picker behavior.\n* Locale in PRODUCT_LOCALES AND a values-\u003clanguage\u003e-r\u003cREGION\u003e/ folder exists: Locale goes in the Suggested header\n* Locale in PRODUCT_LOCALES but a values-\u003clanguage\u003e-r\u003cREGION\u003e/ folder does NOT exist: Locale goes in the Suggested header if the SIM card is from the same region. If not, it goes in the All Regions header.\n\nSuppose we use a SIM card from Serbia, and we want to set Serbian (Latin) as our display language. Normally, Serbian (Latin, Serbia) goes in the All Regions header because core/res/res/values-b+sr+Latn+RS/ does not currently exist, even though sr_Latn_RS exists in PRODUCT_LOCALES, but because we have a Serbian SIM, it goes in the Suggested header instead. On the other hand, Serbian (Cyrillic, Serbia) goes in the Suggested header, regardless of whether or not the SIM card is from Serbia.",
      "parentUuid": "afcf8d4b_5d16b59e",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "82aa4581_f1d3c8e5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1189505
      },
      "writtenOn": "2022-06-30T20:59:26Z",
      "side": 1,
      "message": "After reading all the previous comments from me and Mihai, please kindly review the commits as soon as possible to prevent any delays in pushing this monumental bug fix. Your prompt response would be greatly appreciated.",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11fec301_d9cbcb47",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 17
      },
      "lineNbr": 0,
      "author": {
        "id": 1065394
      },
      "writtenOn": "2022-06-30T21:37:47Z",
      "side": 1,
      "message": "Sorry, but that does not match what I know, at least not in the new picker.\nI can point you to the code doing what I described.\n\nBut maybe this is not the right place for this discussion :-)\n\nI will mark it as Resolved, so that other reviewers can ignore it.\nAnd we can continue somewhere else, if you want :-)\n\nM.",
      "parentUuid": "bb38ca33_36acbf80",
      "revId": "660af0276fce00c196711cd7479342ce0e3ede74",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}