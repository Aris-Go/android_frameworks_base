{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8554d770_cfaf0bdc",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5427,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-11-19T09:29:39Z",
      "side": 1,
      "message": "In fact I think the contract for this method is not clear. This will return the currently satisfied request if any, otherwise the firstÂ ? I\u0027m not sure what use we\u0027d have for this (I don\u0027t think it\u0027s the right thing for the next patch, see my comments there)\n\nThe contract for getSatisfierRequest on the other hand is well-defined, so I have no objection if we have use cases.",
      "range": {
        "startLine": 5427,
        "startChar": 23,
        "endLine": 5427,
        "endChar": 33
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c5410a45_88b2c4eb",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5427,
      "author": {
        "id": 1470463
      },
      "writtenOn": "2020-11-20T01:25:45Z",
      "side": 1,
      "message": "Ok sounds good. I wasn\u0027t sure on that so thanks for clearing that up.",
      "parentUuid": "8554d770_cfaf0bdc",
      "range": {
        "startLine": 5427,
        "startChar": 23,
        "endLine": 5427,
        "endChar": 33
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc91f1d1_b2d1ff94",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5432,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-11-19T09:29:39Z",
      "side": 1,
      "message": "Maybe getSatisfiedRequest",
      "range": {
        "startLine": 5432,
        "startChar": 31,
        "endLine": 5432,
        "endChar": 50
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d311965_78ef939e",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5432,
      "author": {
        "id": 1470463
      },
      "writtenOn": "2020-11-20T01:25:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dc91f1d1_b2d1ff94",
      "range": {
        "startLine": 5432,
        "startChar": 31,
        "endLine": 5432,
        "endChar": 50
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b0941409_254e1d49",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5434,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-11-19T09:29:39Z",
      "side": 1,
      "message": "Please use foreach-style",
      "range": {
        "startLine": 5434,
        "startChar": 21,
        "endLine": 5434,
        "endChar": 58
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d884c203_4308673a",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5434,
      "author": {
        "id": 1470463
      },
      "writtenOn": "2020-11-20T01:25:45Z",
      "side": 1,
      "message": "Ok sure np. Main reason I did it was because we were iterating over an ArrayList where we can incur a 3x performance penalty as per this guidance:\nhttps://developer.android.com/training/articles/perf-tips.html#Loops\n\nI believe the intermediate iterator in the foreach-style for an ArrayList is what causes the performance degradation. That said, foreach is cleaner (\"IMO\") so if you are ok with that approach then that works for me.",
      "parentUuid": "b0941409_254e1d49",
      "range": {
        "startLine": 5434,
        "startChar": 21,
        "endLine": 5434,
        "endChar": 58
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2108f651_810de2a6",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5435,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-11-19T09:29:39Z",
      "side": 1,
      "message": "This looks awfully expensive (this whole method in O(n.log(m)), and while n is normally 1, m is relatively large (a network often satisfies many requests).\n\nIf we need to call this often, I would advocate for replacing mSatisfier with a small data class to encapsulate the NAI and the corresponding request.",
      "range": {
        "startLine": 5435,
        "startChar": 24,
        "endLine": 5435,
        "endChar": 82
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ea9e8953_b4884f77",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5435,
      "author": {
        "id": 1470463
      },
      "writtenOn": "2020-11-20T01:25:45Z",
      "side": 1,
      "message": "Yes, fair enough. Right now we are only doing this in one place but that\u0027s liable to increase. I was planning to revisit this once I address writes to mSatisfier in a future commit. We will also then have a good idea of how often we use this code. Sound good?",
      "parentUuid": "2108f651_810de2a6",
      "range": {
        "startLine": 5435,
        "startChar": 24,
        "endLine": 5435,
        "endChar": 82
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6fbb082d_5d6f7ba6",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5441,
      "author": {
        "id": 1015428
      },
      "writtenOn": "2020-11-19T09:29:39Z",
      "side": 1,
      "message": "Please return early :\n\n  if (mSatisfier \u003d\u003d null) return null",
      "range": {
        "startLine": 5441,
        "startChar": 12,
        "endLine": 5441,
        "endChar": 24
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5eb5d7ad_d56f5580",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 6
      },
      "lineNbr": 5441,
      "author": {
        "id": 1470463
      },
      "writtenOn": "2020-11-20T01:25:45Z",
      "side": 1,
      "message": "Done however I still need the final `return null` so all code paths have a return value.",
      "parentUuid": "6fbb082d_5d6f7ba6",
      "range": {
        "startLine": 5441,
        "startChar": 12,
        "endLine": 5441,
        "endChar": 24
      },
      "revId": "c16f1693da72e928b8ddd88c5ce8f5b58cbab1b8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}