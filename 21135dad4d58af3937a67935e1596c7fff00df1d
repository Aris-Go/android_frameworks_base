{
  "comments": [
    {
      "key": {
        "uuid": "4fe86c4f_109fcc75",
        "filename": "packages/SystemUI/src/com/android/systemui/statusbar/policy/MobileSignalController.java",
        "patchSetId": 16
      },
      "lineNbr": 691,
      "author": {
        "id": 1237921
      },
      "writtenOn": "2019-12-10T11:29:46Z",
      "side": 1,
      "message": "Changed from #isAvailable to #isCapable because there is possibility that isAvailable does not return correct value by timing.",
      "range": {
        "startLine": 691,
        "startChar": 32,
        "endLine": 691,
        "endChar": 41
      },
      "revId": "21135dad4d58af3937a67935e1596c7fff00df1d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "de5d4965_7cd1c421",
        "filename": "packages/SystemUI/src/com/android/systemui/statusbar/policy/MobileSignalController.java",
        "patchSetId": 16
      },
      "lineNbr": 691,
      "author": {
        "id": 1098053
      },
      "writtenOn": "2019-12-10T19:11:57Z",
      "side": 1,
      "message": "isCapable does a slightly different thing... isCapable will return whether or not WiFi calling is capable for the current subscription (i.e. if user enabled and carrier configs are enabled), whereas isAvailable will return whether or not we are registered over IMS and WiFi calling is available. Is this okay for your use case? It seems like you would only want the wifi calling icon shown if we were registered.",
      "parentUuid": "4fe86c4f_109fcc75",
      "range": {
        "startLine": 691,
        "startChar": 32,
        "endLine": 691,
        "endChar": 41
      },
      "revId": "21135dad4d58af3937a67935e1596c7fff00df1d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "652c76d0_f5ad3c1c",
        "filename": "packages/SystemUI/src/com/android/systemui/statusbar/policy/MobileSignalController.java",
        "patchSetId": 16
      },
      "lineNbr": 691,
      "author": {
        "id": 1237921
      },
      "writtenOn": "2019-12-12T09:14:50Z",
      "side": 1,
      "message": "Thank you for your comments.\n\nReason why we cannot use #isAvailable:\n In #isAvailable, mMmTelCapabilities is referred but it is also updated triggered by #onCapabilitiesStatusChanged. This #isWifiCallingAvailable is also called triggered by #onCapabilitiesStatusChanged. So, there is possibility that #isAvailable does not return correct value.\n\nOptions:\n I think we have 2 options to decide if icon should be displayed or not.\n\nOption1:\n - #onCapabilitiesStatusChanged reports capabilities with Voice or Video\n - TelephonyManager#isImsRegistered returns true\n - TelephonyManager#getImsRegTechnologyForMmTel returns REGISTRATION_TECH_IWLAN\n\nOption2:\n - #onCapabilitiesStatusChanged reports capabilities with Voice or Video\n - ImsMmTelManager.RegistrationCallback#onRegistered reports REGISTRATION_TECH_IWLAN\n\nFor Option1, TelephonyManager#isImsRegistered and TelephonyManager#getImsRegTechnologyForMmTel are hide api. So, I think option2 is better. What do you think about that?",
      "parentUuid": "de5d4965_7cd1c421",
      "range": {
        "startLine": 691,
        "startChar": 32,
        "endLine": 691,
        "endChar": 41
      },
      "revId": "21135dad4d58af3937a67935e1596c7fff00df1d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "742fa579_4beef6f5",
        "filename": "packages/SystemUI/src/com/android/systemui/statusbar/policy/MobileSignalController.java",
        "patchSetId": 16
      },
      "lineNbr": 691,
      "author": {
        "id": 1098053
      },
      "writtenOn": "2019-12-12T22:27:22Z",
      "side": 1,
      "message": "Yes, option 2 is better, since it is using an API",
      "parentUuid": "652c76d0_f5ad3c1c",
      "range": {
        "startLine": 691,
        "startChar": 32,
        "endLine": 691,
        "endChar": 41
      },
      "revId": "21135dad4d58af3937a67935e1596c7fff00df1d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3ecdad3_cd0cd8d4",
        "filename": "packages/SystemUI/src/com/android/systemui/statusbar/policy/MobileSignalController.java",
        "patchSetId": 16
      },
      "lineNbr": 691,
      "author": {
        "id": 1237921
      },
      "writtenOn": "2019-12-16T05:17:03Z",
      "side": 1,
      "message": "Thank you. I updated the patch.",
      "parentUuid": "742fa579_4beef6f5",
      "range": {
        "startLine": 691,
        "startChar": 32,
        "endLine": 691,
        "endChar": 41
      },
      "revId": "21135dad4d58af3937a67935e1596c7fff00df1d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2b2ca18_1a858240",
        "filename": "telephony/java/android/telephony/CarrierConfigManager.java",
        "patchSetId": 16
      },
      "lineNbr": 3717,
      "author": {
        "id": 1141163
      },
      "writtenOn": "2019-12-12T19:22:41Z",
      "side": 1,
      "message": "pls don\u0027t enable this feature by default .. enable for the carriers who needs it",
      "range": {
        "startLine": 3717,
        "startChar": 76,
        "endLine": 3717,
        "endChar": 80
      },
      "revId": "21135dad4d58af3937a67935e1596c7fff00df1d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}