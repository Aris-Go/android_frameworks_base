{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "256c93f6_00d88109",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1133568
      },
      "writtenOn": "2021-02-08T03:54:29Z",
      "side": 1,
      "message": "Hi Henry and Mikhail,\n\nPlease see this bug fix in ITvInputHardware.aidl for your review.\n\nKind regards,\nDean",
      "revId": "13519360e3043418d1c29eca57edd130ca7ea8d8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "66b7956a_fd59cd4a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2021-02-08T20:31:47Z",
      "side": 1,
      "message": "Dean, the ITvInputHardware interface is also marked with \u0027@hide\u0027, same as the constants from AudioManager. I believe, the components that have access to ITvInputHardware should also have access to these constants.",
      "revId": "13519360e3043418d1c29eca57edd130ca7ea8d8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c316168d_e4707a7d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1133568
      },
      "writtenOn": "2021-02-08T23:12:57Z",
      "side": 1,
      "message": "Hi Mikhail, I think the situation is a bit different.\n\nMy vendor TvInputService app is doing:\n\n1. mTvInputManager \u003d (TvInputManager) context.getSystemService(Context.TV_INPUT_SERVICE);\n\n\u003d\u003e This uses Public SDK TvInputManager\n\n2. mHardware \u003d mTvInputManager.acquireTvInputHardware(mHdmiHwId, mTvInputInfo, mHardwareCallback);\n\n\u003d\u003e This uses SystemApi acquireTvInputHardware and returns a SystemApi Hardware\n\n3. mHardware.overrideAudioSinkWithDeviceType(AudioDeviceInfo.TYPE_BUS, \"\", 0, AudioFormat.CHANNEL_OUT_DEFAULT, AudioFormat.ENCODING_DEFAULT);\n\n\u003d\u003e the new interface overrideAudioSinkWithDeviceType is needed because the existing overrideAudioSink requires @hide (non SystemApi) arguments.\n\nI encountered the build error because requiring private platform access needs the LOCAL_PRIVATE_PLATFORM_APIS, but my vendor module also needs LOCAL_VENDOR_MODULE / LOCAL_PROPRIETARY_MODULE, and the build system does not allow both and causes the error in:\n\nhttps://cs.android.com/android/platform/superproject/+/master:build/make/core/sdk_check.mk;l\u003d31?q\u003dLOCAL_PRIVATE_PLATFORM_APIS\u0026ss\u003dandroid%2Fplatform%2Fsuperproject\n\nbecause the LOCAL_SDK_VERSION gets set automatically by the build system for vendor modules it seems.",
      "parentUuid": "66b7956a_fd59cd4a",
      "revId": "13519360e3043418d1c29eca57edd130ca7ea8d8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64a8c499_8dfb4265",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1042638
      },
      "writtenOn": "2021-02-10T21:16:10Z",
      "side": 1,
      "message": "Thanks for the explanation Dean! Indeed I see that AudioManager.DEVICE_* constants are not SystemApis, just hidden.\n\nMyself I\u0027m not an expert both on SDK APIs and TV input framework. The change seems reasonable, I have one question though: have you considered just using \u0027AudioDeviceInfo\u0027 instance instead of \u0027type, address\u0027 pair? This would look like a more consistent API to me.\n\nIf Henry is OK with this change, and Jean-Michel is agree from the API standpoint, then I certainly will not have any objections.",
      "parentUuid": "c316168d_e4707a7d",
      "revId": "13519360e3043418d1c29eca57edd130ca7ea8d8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33e6fbc8_4290ac96",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1133568
      },
      "writtenOn": "2021-02-11T22:31:25Z",
      "side": 1,
      "message": "Hi Mikhail I agree. Clients can use AudioManager.getDevices() to retrieve AudioDeviceInfos, and the API will be better. Also, I don\u0027t think the AIDL change is needed (otherwise a lot of Parcelable changes are needed). I will push a PS3 which resolves these issues. Thanks for your review!",
      "parentUuid": "64a8c499_8dfb4265",
      "revId": "13519360e3043418d1c29eca57edd130ca7ea8d8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2ded1662_6e7a956f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1133568
      },
      "writtenOn": "2021-12-23T02:08:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "33e6fbc8_4290ac96",
      "revId": "13519360e3043418d1c29eca57edd130ca7ea8d8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}