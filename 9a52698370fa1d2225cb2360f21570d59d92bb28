{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "77dee895_d4737253",
        "filename": "services/core/java/com/android/server/net/NetworkPolicyManagerService.java",
        "patchSetId": 3
      },
      "lineNbr": 5254,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2021-01-07T11:59:30Z",
      "side": 1,
      "message": "I think this logic might be replaced by \n isUidNetworkingBlockedInternal(uid, uidRules \u0026 MASK_METERED_NETWORKS, true, isBackgroundRestricted, null);\nWhere: \n 1. isSystem: system uids will never calls into this function so l.5265 is never\n    true for this call path.\n 2. RULE_REJECT_ALL is filtered by MASK_METERED_NETWORKS, so never true\n 3. isNetworkMetered is always true from the input.\n 4. RULE_REJECT_METERED: Why we didn\u0027t check this condition? IIUC this is a bug.\n\nIf above is true, and we also put isUidNetworkingBlockedInternal to NetworkPolicyUtil, where we can access from CS, then we don\u0027t need this API.",
      "range": {
        "startLine": 5252,
        "startChar": 15,
        "endLine": 5254,
        "endChar": 68
      },
      "revId": "9a52698370fa1d2225cb2360f21570d59d92bb28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bd8cb1b_17429a81",
        "filename": "services/core/java/com/android/server/net/NetworkPolicyManagerService.java",
        "patchSetId": 3
      },
      "lineNbr": 5254,
      "author": {
        "id": 1308473
      },
      "writtenOn": "2021-01-12T06:54:15Z",
      "side": 1,
      "message": "No, I don\u0027t think so because CS doesn\u0027t have uidRules and isBackgroundRestricted value that only contain in NPMS. So I think we need this API probably.",
      "parentUuid": "77dee895_d4737253",
      "range": {
        "startLine": 5252,
        "startChar": 15,
        "endLine": 5254,
        "endChar": 68
      },
      "revId": "9a52698370fa1d2225cb2360f21570d59d92bb28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30a7111f_ad19b76e",
        "filename": "services/core/java/com/android/server/net/NetworkPolicyManagerService.java",
        "patchSetId": 3
      },
      "lineNbr": 5254,
      "author": {
        "id": 1306837
      },
      "writtenOn": "2021-01-12T09:11:12Z",
      "side": 1,
      "message": "Yes and no.\nWe do have them but they are stale copies. Refer mRestrictBackground and mUidRules in CS.\nBut this function is called in syncrhonize call path, so we cannot use them.\nSo you are right we still need this API.\nHowever, althoguh the API is needed, I think the logic can be replaced as above in another CL.\nOr at least a todo \u0026 tracking bug for 4.\n\nGiven that we now are working on API surface.\nI think leave a todo \u0026 track bug for 4 will be the best course of action.",
      "parentUuid": "6bd8cb1b_17429a81",
      "range": {
        "startLine": 5252,
        "startChar": 15,
        "endLine": 5254,
        "endChar": 68
      },
      "revId": "9a52698370fa1d2225cb2360f21570d59d92bb28",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}