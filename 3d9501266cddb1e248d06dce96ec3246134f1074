{
  "comments": [
    {
      "key": {
        "uuid": "AAAIw3///v0\u003d",
        "filename": "core/jni/android/graphics/YuvToJpegEncoder.cpp",
        "patchSetId": 1
      },
      "lineNbr": 104,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2012-08-21T19:16:55Z",
      "side": 1,
      "message": "Standard Android code style mandates braces around conditionals that don\u0027t fit on a single line (here and 3 more instances in this file).",
      "revId": "3d9501266cddb1e248d06dce96ec3246134f1074",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAIrn///pE\u003d",
        "filename": "core/jni/android/graphics/YuvToJpegEncoder.cpp",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 1010050
      },
      "writtenOn": "2012-08-20T18:31:36Z",
      "side": 1,
      "message": "Since yRows is just for padding, and isn\u0027t even initialized to anything, why not just use a single row of pixels that\u0027s (( width + 15 ) \u0026 ~15) long - is there some reason each y[i] needs to be unique? \n\nIn fact, couldn\u0027t all the overflow rows be pointed to some line of yPlanar, and we could avoid allocating yRows entirely? So this line would become just\n\ny[i] \u003d yPlanar + (height - 1) * fStrides[0]\n\nor just y[i] \u003d yPlanar, although the above is probably cache-happier.",
      "revId": "3d9501266cddb1e248d06dce96ec3246134f1074",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAIrn///ls\u003d",
        "filename": "core/jni/android/graphics/YuvToJpegEncoder.cpp",
        "patchSetId": 1
      },
      "lineNbr": 107,
      "author": {
        "id": 1010050
      },
      "writtenOn": "2012-08-20T18:58:52Z",
      "side": 1,
      "message": "Just as a note - this implicitly assumes that there\u0027s at least 15 bytes of allocated data past the end of each Y row, which is true even for the last row of Y as long as (width * height / 2) \u003e 15, because it\u0027ll just go into the UV data.  Given that\u0027s true for any image bigger than 5x6 pixels, I\u0027m not sure it\u0027s a big usability issue, but since we\u0027re fixing segfaults, it\u0027d be nice to close that off too.\n\nIn fact, we don\u0027t technically need special handling for Y padding as long as there\u0027s enough UV rows after the Y rows, although I don\u0027t know if the padding influences the quality of compression on the last block. If it does, presumably duplicating the last row of data would provide better values for compression than random UV data.",
      "revId": "3d9501266cddb1e248d06dce96ec3246134f1074",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}