{
  "comments": [
    {
      "key": {
        "uuid": "dffef0bb_ab940d2c",
        "filename": "core/jni/android_media_AudioSystem.cpp",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1003259
      },
      "writtenOn": "2014-05-30T15:43:09Z",
      "side": 1,
      "message": "I thought it was not mandated any more to delete local refs in Android JNI unless you are in a loop.",
      "range": {
        "startLine": 133,
        "startChar": 0,
        "endLine": 133,
        "endChar": 4
      },
      "revId": "b637ccffd856ba911c1527077cec3abff39035f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f33447f_057674b1",
        "filename": "core/jni/android_media_AudioSystem.cpp",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2014-05-30T16:10:04Z",
      "side": 1,
      "message": "i suspect you are in a loop somewhere higher up the call stack. this isn\u0027t a native method; this is a helper function. so unless you can guarantee that it\u0027s never called within a loop, you need to clean up after yourself. an alternative here would be to have something like gMyClass \u003d NewGlobalRef(FindClass()) in your register_* function and just use gMyClass here. in that case, you can assume that the caller will clean up for you (probably with PushLocalFrame/PopLocalFrame around the call to your register_* function).",
      "parentUuid": "dffef0bb_ab940d2c",
      "range": {
        "startLine": 133,
        "startChar": 0,
        "endLine": 133,
        "endChar": 4
      },
      "revId": "b637ccffd856ba911c1527077cec3abff39035f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fea00f0_377e40be",
        "filename": "core/jni/android_media_AudioSystem.cpp",
        "patchSetId": 1
      },
      "lineNbr": 133,
      "author": {
        "id": 1005472
      },
      "writtenOn": "2014-06-02T07:32:37Z",
      "side": 1,
      "message": "We were running MTBF tests and, because of some problems we have in audio driver, media server was crashing. For each crash this function was called, then media server was restarted. After several hours of running the tests (40-60 hours), system server crashed because of this.\nThe problem is that it\u0027s enough to have this error_callback called once in a while and sooner or later system server will crash, which is not desirable.",
      "parentUuid": "7f33447f_057674b1",
      "range": {
        "startLine": 133,
        "startChar": 0,
        "endLine": 133,
        "endChar": 4
      },
      "revId": "b637ccffd856ba911c1527077cec3abff39035f5",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}