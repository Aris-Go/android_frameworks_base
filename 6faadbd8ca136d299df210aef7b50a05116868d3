{
  "comments": [
    {
      "key": {
        "uuid": "9971eaf5_c6fccf72",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 1528,
      "author": {
        "id": 1000451
      },
      "writtenOn": "2018-03-21T19:17:48Z",
      "side": 1,
      "message": "I\u0027m not sure how safe this actually is.  It might be better to complain loudly (Log.wtf), but continue on safely if it\u0027s null.",
      "range": {
        "startLine": 1528,
        "startChar": 33,
        "endLine": 1528,
        "endChar": 45
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f78ad5f9_3f363d1c",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 1528,
      "author": {
        "id": 1257168
      },
      "writtenOn": "2018-04-05T22:29:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9971eaf5_c6fccf72",
      "range": {
        "startLine": 1528,
        "startChar": 33,
        "endLine": 1528,
        "endChar": 45
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79fcb6f1_b9200e0c",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 2335,
      "author": {
        "id": 1000451
      },
      "writtenOn": "2018-03-22T01:25:08Z",
      "side": 1,
      "message": "I suspect this is the core of the problem.\n\nWhen a NetworkAgent is registered, we immediately program down the private dns information, and the lack of bypass at this time means we can\u0027t validate networks.\n\nLooking at this again, I think we can just delete this, right?",
      "range": {
        "startLine": 2332,
        "startChar": 0,
        "endLine": 2335,
        "endChar": 9
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7ddd96a2_c6479ab8",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 2335,
      "author": {
        "id": 1257168
      },
      "writtenOn": "2018-03-22T12:47:18Z",
      "side": 1,
      "message": "I think this logic is needed to reflect certain changes in the settings (i.e. going from strict to off) in LinkProperties.  I\u0027m afraid I don\u0027t understand what bypass is very well or how the settings and LinkProperties persist (or don\u0027t) when restarting the phone, so I\u0027m pretty confused here.\n\nIs the following the problematic scenario? User turns on phone in strict mode. My code updates LinkProperties to reflect that we\u0027re in strict mode. We\u0027re not able to attempt to validate strict mode for some reason related to \"bypass\". Therefore we don\u0027t actually want LinkProperties to show that we\u0027re in strict mode even though that\u0027s what the setting is?",
      "parentUuid": "79fcb6f1_b9200e0c",
      "range": {
        "startLine": 2332,
        "startChar": 0,
        "endLine": 2335,
        "endChar": 9
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a65d273_2543f422",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 2335,
      "author": {
        "id": 1000451
      },
      "writtenOn": "2018-03-22T21:05:19Z",
      "side": 1,
      "message": "Yes, that is what I believe is happening.\n\nI see your point about going from strict to off or opportunistic.  I think the proper fix is to move this code into handlePrivateDnsSettingsChanged() in the \"if (!cfg.inStrictMode())\" block.",
      "parentUuid": "7ddd96a2_c6479ab8",
      "range": {
        "startLine": 2332,
        "startChar": 0,
        "endLine": 2335,
        "endChar": 9
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "902d21e0_095f6d52",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 2335,
      "author": {
        "id": 1257168
      },
      "writtenOn": "2018-03-23T20:13:10Z",
      "side": 1,
      "message": "I moved the block into handlePrivateDnsSettingsChanged and updated the tests accordingly, although I\u0027m not confident the tests are capturing the desired behavior.",
      "parentUuid": "9a65d273_2543f422",
      "range": {
        "startLine": 2332,
        "startChar": 0,
        "endLine": 2335,
        "endChar": 9
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "339ad59d_42685542",
        "filename": "services/core/java/com/android/server/ConnectivityService.java",
        "patchSetId": 2
      },
      "lineNbr": 2335,
      "author": {
        "id": 1257168
      },
      "writtenOn": "2018-04-05T22:29:13Z",
      "side": 1,
      "message": "Changing this back now that bypass is implemented.",
      "parentUuid": "902d21e0_095f6d52",
      "range": {
        "startLine": 2332,
        "startChar": 0,
        "endLine": 2335,
        "endChar": 9
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ef0de2d_d4d2143c",
        "filename": "services/core/java/com/android/server/connectivity/DnsManager.java",
        "patchSetId": 2
      },
      "lineNbr": 307,
      "author": {
        "id": 1000451
      },
      "writtenOn": "2018-03-21T19:17:48Z",
      "side": 1,
      "message": "Consider a slightly different construction, perhaps:\n\n    final PrivateDnsValidationStatus statuses \u003d mFoo.get(update.netId);\n    if (statuses \u003d\u003d null) return;\n    statuses.updateStatus(update);",
      "range": {
        "startLine": 307,
        "startChar": 78,
        "endLine": 307,
        "endChar": 79
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0fa0a111_f97b6ea1",
        "filename": "services/core/java/com/android/server/connectivity/DnsManager.java",
        "patchSetId": 2
      },
      "lineNbr": 307,
      "author": {
        "id": 1257168
      },
      "writtenOn": "2018-04-05T22:29:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8ef0de2d_d4d2143c",
      "range": {
        "startLine": 307,
        "startChar": 78,
        "endLine": 307,
        "endChar": 79
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "559c533b_c52f1fef",
        "filename": "tests/net/java/com/android/server/connectivity/DnsManagerTest.java",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1000451
      },
      "writtenOn": "2018-03-21T19:17:48Z",
      "side": 1,
      "message": "They can\u0027t both be the default network.\n\nMight consider adding\n\n    final boolean IS_DEFAULT \u003d true;\n    final boolean NOT_DEFAULT \u003d false;\n\nand use the named constants throughout.",
      "range": {
        "startLine": 98,
        "startChar": 76,
        "endLine": 98,
        "endChar": 80
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "659ecb68_b7a268e5",
        "filename": "tests/net/java/com/android/server/connectivity/DnsManagerTest.java",
        "patchSetId": 2
      },
      "lineNbr": 98,
      "author": {
        "id": 1257168
      },
      "writtenOn": "2018-04-05T22:29:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "559c533b_c52f1fef",
      "range": {
        "startLine": 98,
        "startChar": 76,
        "endLine": 98,
        "endChar": 80
      },
      "revId": "6faadbd8ca136d299df210aef7b50a05116868d3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}