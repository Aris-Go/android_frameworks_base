{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2f31c7e2_e1db71a5",
        "filename": "packages/Tethering/Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 54,
      "author": {
        "id": 1308504
      },
      "writtenOn": "2020-10-29T07:37:24Z",
      "side": 1,
      "message": "If we remove this, do we get build error ? This include the detail implementation of tethering(e.g. Tethering.java, IpServer.java, ...). Giving that you just make it available for tethering module itself so it is unlike to be used outside of tethering, but I still prefer don\u0027t make it available for any apex if we can.",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 54,
        "endChar": 6
      },
      "revId": "31469b65d59d0818994820d49d5be148793421cc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56bdee7d_770ee64b",
        "filename": "packages/Tethering/Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 54,
      "author": {
        "id": 1308504
      },
      "writtenOn": "2020-10-29T07:47:35Z",
      "side": 1,
      "message": "Here is the case I want to prevent: if someone create a new library and make it available outside of tethering, but unfortunately that library use TetheringApiCurrentLib. This may make TetheringApiCurrentLib be un-intendedly exposed outside of tethering module.",
      "parentUuid": "2f31c7e2_e1db71a5",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 54,
        "endChar": 6
      },
      "revId": "31469b65d59d0818994820d49d5be148793421cc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "458b0fea_a7fcc71b",
        "filename": "packages/Tethering/Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 54,
      "author": {
        "id": 1288034
      },
      "writtenOn": "2020-10-29T08:58:00Z",
      "side": 1,
      "message": "Yes it won\u0027t build:\n\nerror: frameworks/base/packages/Tethering/apex/Android.bp:32:1: module \"com.android.tethering.next\" variant \"android_common_com.android.tethering.next_image\": \"Tethering\" requires \"TetheringApiCurrentLib\" that is not available for the APEX. Dependency path:\n           via tag apex.dependencyTag: { name:androidApp payload:true}\n    -\u003e Tethering{os:android,arch:common,perform_override:,apex:apex10000}\n           via tag java.dependencyTag: { name:staticlib}\n    -\u003e TetheringApiCurrentLib{os:android,arch:common,apex:apex10000}\n17:52:51 soong bootstrap failed with: exit status 1\n\n\nI don\u0027t really understand your concern, this apex_available rule means that TetheringApiCurrentLib can (directly or not) be included in the tethering module; I don\u0027t understand how this relates to a library depending on TetheringApiCurrentLib, unless that library is part of the tethering module too ?\n\nNote that today it only works because TetheringApiCurrentLib is allowlisted in build/soong/apex/apex.go as a temporary measure, but TetheringApiCurrentLib should already say apex_available: [\"com.android.tethering\"] instead.",
      "parentUuid": "56bdee7d_770ee64b",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 54,
        "endChar": 6
      },
      "revId": "31469b65d59d0818994820d49d5be148793421cc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "20b9ea87_911b6d03",
        "filename": "packages/Tethering/Android.bp",
        "patchSetId": 2
      },
      "lineNbr": 54,
      "author": {
        "id": 1308504
      },
      "writtenOn": "2020-10-29T09:07:50Z",
      "side": 1,
      "message": "Ohh, the build error you met means my concern is unnecessary. My original concern is in-directly include to other library which is expose to outside of tethering module. Now I know the compiler would protect this in-directly include case.",
      "parentUuid": "458b0fea_a7fcc71b",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 54,
        "endChar": 6
      },
      "revId": "31469b65d59d0818994820d49d5be148793421cc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}