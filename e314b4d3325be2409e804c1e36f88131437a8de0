{
  "comments": [
    {
      "key": {
        "uuid": "cd18f82e_d5ba1cb4",
        "filename": "services/java/com/android/server/connectivity/Tethering.java",
        "patchSetId": 1
      },
      "lineNbr": 1358,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2013-08-27T07:43:08Z",
      "side": 1,
      "message": "I don\u0027t understand. If ipv4Default is null, then there is no default route for IPv4. If there is no default route for IPv4, then tethering won\u0027t work, because the packets can\u0027t go anywhere. So there is no point enabling tethering.\n\nWhat is the network configuration you are trying to fix? Why does the interface not have a default IPv4 route in the LinkProperties?",
      "revId": "e314b4d3325be2409e804c1e36f88131437a8de0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ed1bfc25_99ebbf9c",
        "filename": "services/java/com/android/server/connectivity/Tethering.java",
        "patchSetId": 1
      },
      "lineNbr": 1358,
      "author": {
        "id": 1014499
      },
      "writtenOn": "2013-08-27T09:12:01Z",
      "side": 1,
      "message": "HI, Lorenzo,\nOur 3G mobile is setting its route through the following code directly:\n rt.rt_dst.sa_family \u003d AF_INET;\n    ((struct sockaddr_in *)\u0026rt.rt_dst)-\u003esin_addr.s_addr \u003d INADDR_ANY;\n\n    rt.rt_genmask.sa_family \u003d AF_INET;\n    ((struct sockaddr_in *)\u0026rt.rt_genmask)-\u003esin_addr.s_addr \u003d INADDR_ANY;\nIt can get IP not through DHCP server. \nSo our 3G LinkPropertities\u0027s route is NULL.\nBut for wifi and ethernet, they will add their route through LinkPropertities.addRoute when finishing dhcp.\nI don\u0027t know how Nexus4 add its route for 3G. Any better way in framework to do it?",
      "parentUuid": "cd18f82e_d5ba1cb4",
      "revId": "e314b4d3325be2409e804c1e36f88131437a8de0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd18f82e_f5fd9825",
        "filename": "services/java/com/android/server/connectivity/Tethering.java",
        "patchSetId": 1
      },
      "lineNbr": 1358,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2013-08-27T11:49:12Z",
      "side": 1,
      "message": "You\u0027re not supposed to set the default route in the RIL. If you look at ril.h, in the documentation for SETUP DATA CALL you\u0027ll see a comment that says \"Must NOT change the linux routing table.\"\n\nInstead, you should return the gateway in the response to SETUP_DATA_CALL, without changing the routing. That way, the Android framework will see the response and configure routing itself.",
      "parentUuid": "ed1bfc25_99ebbf9c",
      "revId": "e314b4d3325be2409e804c1e36f88131437a8de0",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}