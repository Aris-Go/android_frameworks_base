{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "316cd3c7_cdf19655",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1006497
      },
      "writtenOn": "2022-01-26T19:55:57Z",
      "side": 1,
      "message": "Adding some security eng to weigh in on the permissions questions. Longer term, it would be kind of nice for bindService to take a permission as a parameter somehow to make it easy to avoid this kind of TOCTTOU bug.\n\nI don\u0027t think we need to block on security though. We can merge now and then fix later if they think it\u0027s a significant issue.",
      "revId": "33a8f22481a82a92442698bca99f8ed538b2f104",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "73609f2a_b6bed6e9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1080238
      },
      "writtenOn": "2022-01-26T20:03:12Z",
      "side": 1,
      "message": "Great thanks - I\u0027ll autosubmit this and follow up with any comments from Linus or Bernado.",
      "parentUuid": "316cd3c7_cdf19655",
      "revId": "33a8f22481a82a92442698bca99f8ed538b2f104",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cefefe24_8f669461",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1053813
      },
      "writtenOn": "2022-01-27T10:52:00Z",
      "side": 1,
      "message": "I don\u0027t think this TOCTTOU case is very common, and at worst it will cause the an app to bind to something that it didn\u0027t want to bind to (because it was swapped out), but it would be incredibly racy and I can\u0027t really see anyone reproducing something like that without having a lot of control of the device, and if they have that level of control of the device then there are a lot of other attacks they can perform).\n\nSecurity comes from checking the permission synchronously before handing over any sensitive data, as is being done with DUMP and PACKAGE_USAGE_STATS here.",
      "parentUuid": "73609f2a_b6bed6e9",
      "revId": "33a8f22481a82a92442698bca99f8ed538b2f104",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "353094c0_f8d22358",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1006497
      },
      "writtenOn": "2022-01-27T12:35:38Z",
      "side": 1,
      "message": "\u003e but it would be incredibly racy and I can\u0027t really see anyone reproducing something like that without having a lot of control of the device, and if they have that level of control of the device then there are a lot of other attacks they can perform).\n\nYeah, that\u0027s why I\u0027m not super concerned about it either, but would be nice to close just so we don\u0027t have an additional mechanism to be used in an exploit chain. \n\n\u003e Security comes from checking the permission synchronously before handing over any sensitive data, as is being done with DUMP and PACKAGE_USAGE_STATS here.\n\nThis is happening before the service bind now though, so it\u0027s possible we get it wrong if the package changes between the permission check and the bindService call. Unlikely, but possible.\n\nLike I said, we could just check in two locations (first to avoid binding to things that don\u0027t hold the right permissions, the second to avoid the TOCTTOU race). Sounds like you\u0027re not that worried about it though.",
      "parentUuid": "cefefe24_8f669461",
      "revId": "33a8f22481a82a92442698bca99f8ed538b2f104",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}