package {
    default_applicable_licenses: ["frameworks_base_license"],
}

aidl_interface {
    name: "parcelableIface",
    host_supported: true,
    unstable: true,
    srcs: [
        "parcelables/EmptyParcelable.aidl",
        "parcelables/SingleDataParcelable.aidl",
        "parcelables/GenericDataParcelable.aidl",
    ],
    backend: {
        java: {
            enabled: true,
            platform_apis: true,
        },
        rust: {
            enabled: true,
        },
    },
}

java_fuzz {
    name: "java_binder_parcel_fuzzer",
    srcs: [
        "ParcelFuzzer.java",
        "ReadUtils.java",
        "FuzzUtils.java",
        "FuzzOperation.java",
        "ReadOperation.java",
    ],
    static_libs: [
        "jazzer",
        "random_parcel_lib",
        "parcelableIface-java",
    ],
    jni_libs: [
        "librandom_parcel_jni",
        "libc++",
        "libandroid_runtime",
    ],
    libs: [
        "framework",
        "unsupportedappusage",
        "ext",
        "framework-res",
    ],
    native_bridge_supported: true,
}
